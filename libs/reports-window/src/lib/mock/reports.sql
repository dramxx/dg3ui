--CREATE DATABASE gui;

DROP SEQUENCE seq_reports CASCADE;
CREATE SEQUENCE seq_reports;
DROP SEQUENCE seq_exported_reports CASCADE;
CREATE SEQUENCE seq_exported_reports;
DROP SEQUENCE seq_saved_filters CASCADE;
CREATE SEQUENCE seq_saved_filters;
DROP SEQUENCE seq_exported_files CASCADE;
CREATE SEQUENCE seq_exported_files;

DROP table reports CASCADE;
CREATE TABLE reports (
id BIGINT PRIMARY KEY default nextval('seq_reports'),
report_config json NOT NULL,
author text NOT NULL,
name text NOT NULL,
description text,
module text NOT NULL,
visibility text ARRAY NOT NULL,
users text ARRAY NOT NULL
);

DROP table saved_filters CASCADE;
CREATE TABLE saved_filters (
id BIGINT PRIMARY KEY default nextval('seq_saved_filters'),
content_filter json NOT NULL,
author text NOT NULL,
name text NOT NULL,
description text,
visibility text ARRAY NOT NULL,
users text ARRAY NOT NULL
);


DROP table exported_files CASCADE;

CREATE TABLE exported_files (
id BIGINT PRIMARY KEY default nextval('seq_exported_files'),
filename text NOT NULL,
created_at TIMESTAMP NOT NULL,
username text NOT NULL,
export_file BYTEA NOT NULL,
task_id text NOT NULL
);

DROP table exported_reports CASCADE;

CREATE TABLE exported_reports (
id BIGINT PRIMARY KEY default nextval('seq_exported_reports'),
fk_reports_id BIGINT REFERENCES reports(id) NOT NULL,
export_file BYTEA NOT NULL
);

-- NTL reports
--insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"NTL_overview","techDescription":"Non technical losses overview","title":"NTL overview","keywords":["key","words","for","place","report"],"canvasSettings":{"rows":10,"columns":10},"version":"1.0.0","widgets":[{"id":"suspicious_substations","type":"TableWidget","overviewModule":"NTL","overviewId":"substations","gql":{"rootPath":"$.places[*]","query":"\n  query suspicious_substations {\n    places(filter: { node: { kindName: \"SUBSTATION\" } }) {\n      intId\n      id {\n        value\n      }\n      sub_transformer: relPlacesSet(\n        walk: {\n          path: [{ follow: { edge: { type: \"CONNECTED_TO\", direction: IN } } }]\n        }\n        filter: {\n          node: {\n            kindName: [\"TRANSFORMER\"]\n          }\n        }\n      ) {\n      items{\n          id {\n            value\n          }\n        }\n      }\n      connectedPlaces: relPlacesSet(\n        walk: {\n          path: [{ follow: { edge: { type: \"CONNECTED_TO\", direction: IN } } }]\n        }\n        filter: {\n          node: {\n            kindName: [\"CONNECTION_POINT\", \"CONSUMPTION_POINT\", \"SEGMENT\", \"JUNCTION\"]\n          }\n        }\n      ) {\n        groupByKind {\n          kind {\n            codeName\n          }\n          set {\n            count\n          }\n        }\n      }\n      diosObject (filter: { didFilter: {ids: \"non_technical_losses.suspicious_detection_summary_estimated\"}}) {\n        items{\n          value{\n            normalizedValue\n          }\n        }\n      }\n    }\n  }\n","jsonPathMapping":[{"key":"tableColumns","type":"object","values":[{"key":"id","value":"$.sub_transformer.items[0].id.value"},{"key":"trans_subs","value":"$.id.value"},{"key":"conn_points","value":"$.connectedPlaces.groupByKind[?(@.kind.codeName == \"CONNECTION_POINT\")].set.count"},{"key":"grid_seg","value":"$.connectedPlaces.groupByKind[?(@.kind.codeName == \"SEGMENT\")].set.count"},{"key":"cons_points","value":"$.connectedPlaces.groupByKind[?(@.kind.codeName == \"CONSUMPTION_POINT\")].set.count"},{"key":"junctions","value":"$.connectedPlaces.groupByKind[?(@.kind.codeName == \"JUNCTION\")].set.count"},{"key":"seg_length","value":"$.diosObject.items[0].value.normalizedValue.segments_length_sum"},{"key":"est_daily_loss","value":"$.diosObject.items[0].value.normalizedValue.estimated_daily_consumption"}]}],"widgetConfig":[{"Header":"transformer substation","accessor":"trans_subs"},{"Header":"connection points (count)","accessor":"conn_points"},{"Header":"consumption points (count)","accessor":"cons_points"},{"Header":"grid segments (count)","accessor":"grid_seg"},{"Header":"junctions (count)","accessor":"junctions"},{"Header":"suspicious segments length (m)","accessor":"seg_length"},{"Header":"est. daily loss (kWh)","accessor":"est_daily_loss"}]},"position":{"x":0,"y":0,"height":5,"width":6},"chartProps":{"title":"Top 15 suspicious secondary stations","rowsInTable":15,"showBorder":true,"showExport":false,"showPageSize":false,"showPagination":false}},{"id":"suspicions","type":"TableWidget","overviewModule":"NTL","overviewId":"suspicions","gql":{"rootPath":"$.diosSet.items[*]","query":"\n query list_of_suspicions {\n diosSet(\n filter: {\n didFilter: { ids: \"non_technical_losses.suspicious_detection_summary_estimated\" }\n }\n ) {\n items {\n id\n objectPlace {\n id {\n value\n }\n }\n value {\n certainty\n normalizedValue\n }\n }\n }\n }\n","jsonPathMapping":[{"key":"tableColumns","type":"object","values":[{"key":"id","value":"$.id"},{"key":"susp_segment","value":"$.value.normalizedValue.segments"},{"key":"trans_subs","value":"$.objectPlace.id.value"},{"key":"seg_length","value":"$.value.normalizedValue.segments_length_sum"},{"key":"cons_volume","value":"$.value.normalizedValue.estimated_daily_consumption"},{"key":"num_of_seg","value":"$.value.normalizedValue.segments.length"}]}],"widgetConfig":[{"Header":"suspicious segments","accessor":"susp_segment"},{"Header":"transformer substation","accessor":"trans_subs"},{"Header":"suspicious segments (count)","accessor":"num_of_seg"},{"Header":"suspicious segments length (m)","accessor":"seg_length"},{"Header":"consumption volume (kWh)","accessor":"cons_volume"}]},"position":{"x":0,"y":5,"height":5,"width":6},"chartProps":{"title":"Top 15 suspicions","rowsInTable":15,"showBorder":true,"showExport":false,"showPageSize":false,"showPagination":false}},{"id":"suspiciousDetectionSummary","type":"ScatterPlot","overviewModule":"NTL","overviewId":"suspicions","gql":{"rootPath":"$","query":"\n  query list_of_suspicions {\n    diosSet(\n      filter: {\n        didFilter: { ids: \"non_technical_losses.suspicious_detection_summary_estimated\" }\n      }\n    ) {\n      items {\n        id\n        objectPlace {\n          id {\n            value\n          }\n        }\n        value {\n          certainty\n          normalizedValue\n        }\n      }\n    }\n  }\n","jsonPathMapping":[{"key":"seriesObject","type":"object","values":[{"key":"id","value":"test"}]},{"key":"seriesData","type":"array","values":[{"key":"x","value":"$.diosSet.items[*].value.certainty"},{"key":"y","value":"$.diosSet.items[*].value.normalizedValue.segments_length_sum"},{"key":"value","value":"$.diosSet.items[*].value.normalizedValue.estimated_daily_consumption"},{"key":"label","value":"$.diosSet.items[*].value.normalizedValue.segments"}]}]},"position":{"x":6,"y":0,"height":10,"width":4},"chartProps":{"title":"estimated illegal connections","widgetStyle":"","showBorder":true,"colors":["hsl(2, 59%, 54%)","hsl(206, 33%, 33%)","#FFD38D","#B1423D","#FFC452","#D9752D","#BF5533","#B1423D","#923545","#79313D"],"legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":true,"enableTooltip":false,"axisXLabel":"Certainty","axisYLabel":"Segments length (m)","valueLabel":"Est. daily consumption (kWh)","minSymbolSize":10,"maxSymbolSize":100,"enableXZoom":true}}]}', 'SYSTEM','overview', 'NTL','NTL',ARRAY['NTL_VIEW', 'NTL_USER','NTL_ADMIN'], ARRAY['SYSTEM']);

-- PANE reports
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"paneOverviewReport","techDescription":"Panel overview","title":"přehled","keywords":["kpi chart","panel","overview"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"devicesCount","type":"KpiChart","overviewModule":"PANE","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$.devicesSet","query":"\n          query DeviceCount($devicesSetFilter: InstancesSetPatternMatcher!){\n            devicesSet (filter: $devicesSetFilter) {\n              count\n            }\n          }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"pane.devicesCount"},{"key":"value","value":"$[*].count"}]}],"position":{"x":0,"y":0,"height":3,"width":4},"chartProps":{"title":"aktuální počet zařízení","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"placesCount","type":"KpiChart","overviewModule":"PANE","overviewId":"","includedFilters":["place"],"language":"jsonpath","rootPath":"$.placesSet","query":"\n        query PlacesCount($placesSetFilter: InstancesSetPatternMatcher!) {\n          placesSet(filter: {AND: [$placesSetFilter, {node: {kindId: [\"place:place.consumption_point\",\"place:place.secondary_substation\"]}}]}) {\n            count\n          }\n        }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"pane.placesCount"},{"key":"value","value":"$[*].count"}]}],"position":{"x":4,"y":0,"height":3,"width":4},"chartProps":{"title":"aktuální počet míst","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}}]}', 'SYSTEM','přehled', 'Panel overview','PANE',ARRAY['PANE_VIEW', 'PANE_USER','PANE_ADMIN'], ARRAY['SYSTEM']);

-- Devices reports
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"deviOverviewReport","techDescription":"Devices overview","title":"přehled","keywords":["kpi chart","devices","count"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"DevicesCount","type":"KpiChart","overviewModule":"DEVI","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$.devicesSet","query":"\n          query DeviceCount($devicesSetFilter: InstancesSetPatternMatcher!){\n            devicesSet (filter: $devicesSetFilter) {\n              count\n            }\n          }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"devi.deviceCount"},{"key":"value","value":"$[*].count"}]}],"position":{"x":0,"y":0,"height":3,"width":4},"chartProps":{"title":"aktuální počet zařízení","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"ElectricMetersCount","type":"KpiChart","overviewModule":"DEVI","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$.devicesSet","query":"\n          query ElectricMetersCount($devicesSetFilter: InstancesSetPatternMatcher!) {\n            devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {attrValue: {did: \"information:attribute.ptb_skupina\", value: [\"1\", \"2\", \"3\", \"4\"]}}}}]}) {\n              count\n            }\n          }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"devi.ElectricMetersCount"},{"key":"value","value":"$[*].count"}]}],"position":{"x":4,"y":0,"height":3,"width":4},"chartProps":{"title":"počet elektroměrů","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}}]}', 'SYSTEM','přehled', 'Meters Praha','DEVI',ARRAY['DEVI_VIEW', 'DEVI_USER','DEVI_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"deviStatisticsReport","techDescription":"Devices statistics","title":"statistiky","keywords":["devices","statistics"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"allDevices","type":"PieChart","overviewModule":"DEVI","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$","query":"\n        query allDevices($devicesSetFilter: InstancesSetPatternMatcher!) {\n          addElecricMeters: devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {id: [\"device:device.ptb-5.LZQJXC\", \"device:device.ptb-5.LZQJ400V3100AX6\"]}}}]}) {\n            count\n          }\n          smartMeters: devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {attrValue: {did: \"information:attribute.ptb_skupina\", value: [\"1\", \"2\", \"3\", \"4\"]}}}}]}) {\n            count\n          }\n          concentrators:   devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {id: [\"device:device.ptb-5.CXPSGCON100\", \"device:device.ptb-5.CXPSGCON200\", \"device:device.ptb-5.CXPSG200GWYC\"]}}}]}) {\n            count\n          }\n        }\n        ","jsonPathMapping":[{"key":"addElecricMeters","type":"object","values":[{"key":"id","value":"addElecricMeters"},{"key":"name","value":"součtové elektroměry"},{"key":"value","value":"$[\"addElecricMeters\"].count"}]},{"key":"smartMeters","type":"object","values":[{"key":"id","value":"smartMeters"},{"key":"name","value":"smartmetery"},{"key":"value","value":"$[\"smartMeters\"].count"}]},{"key":"concentrators","type":"object","values":[{"key":"id","value":"concentrators"},{"key":"name","value":"koncentrátory"},{"key":"value","value":"$[\"concentrators\"].count"}]}],"position":{"x":0,"y":0,"height":11,"width":10},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"všechna zařízení","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"koncetratory","type":"PieChart","overviewModule":"DEVI","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$.devicesSet.groupByKind[*]","query":"\n              query concentrators($devicesSetFilter: InstancesSetPatternMatcher!) {\n                devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {id: [\"device:device.ptb-5.CXPSGCON100\", \"device:device.ptb-5.CXPSGCON200\", \"device:device.ptb-5.CXPSG200GWYC\"]}}}]}) {\n                  groupByKind {\n                    kind {\n                      id\n                      localization {\n                        name\n                      }\n                    }\n                    set {\n                      count\n                    }\n                  }\n                }\n              }\n        ","jsonPathMapping":[{"key":"pie","type":"object","values":[{"key":"id","value":"$.kind.localization.name"},{"key":"name","value":"$.kind.localization.name"},{"key":"value","value":"$.set.count"}]}],"position":{"x":10,"y":0,"height":11,"width":10},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"koncentrátory","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"souctoveElektromery","type":"PieChart","overviewModule":"DEVI","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$.devicesSet.groupByKind[*]","query":"\n              query addElectricMeters($devicesSetFilter: InstancesSetPatternMatcher!) {\n                devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {id: [\"device:device.ptb-5.LZQJXC\", \"device:device.ptb-5.LZQJ400V3100AX6\"]}}}]}) {\n                  groupByKind {\n                    kind {\n                      id\n                      localization {\n                        name\n                      }\n                    }\n                    set {\n                      count\n                    }\n                  }\n                }\n              }\n        ","jsonPathMapping":[{"key":"pie","type":"object","values":[{"key":"id","value":"$.kind.localization.name"},{"key":"name","value":"$.kind.localization.name"},{"key":"value","value":"$.set.count"}]}],"position":{"x":0,"y":11,"height":11,"width":10},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"součtové elektroměry","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"smartmetery","type":"PieChart","overviewModule":"DEVI","overviewId":"","includedFilters":["device"],"language":"jsonpath","rootPath":"$.devicesSet.groupByKind[*]","query":"\n        query SmartMeters($devicesSetFilter: InstancesSetPatternMatcher!) {\n          devicesSet(filter: {AND: [$devicesSetFilter, {node: {kind: {attrValue: {did: \"information:attribute.ptb_skupina\", value: [\"1\", \"2\", \"3\", \"4\"]}}}}]}) {\n            groupByKind {\n              kind {\n                id\n                localization  {\n                  name\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n        ","jsonPathMapping":[{"key":"pie","type":"object","values":[{"key":"id","value":"$.kind.localization.name"},{"key":"name","value":"$.kind.localization.name"},{"key":"value","value":"$.set.count"}]}],"position":{"x":10,"y":11,"height":11,"width":10},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"smartmetery","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}}]}', 'SYSTEM','statistiky', 'Meters Praha','DEVI',ARRAY['DEVI_VIEW', 'DEVI_USER','DEVI_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"deviSapActualisationReport","techDescription":"Devices SAP actualisation report","title":"aktualizace SAP","keywords":["kpi chart","devices","SAP"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"sapDeviTaskOverview","type":"TableWidget","overviewModule":"DEVI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n            query sapDeviTaskOverview($time: TaskTimeDelimitation) {\n              set: taskExecutionsSet(time: $time, filter: {templateId: [\"synchronization_sap.v1\"]}) {\n                count\n                items(ordering: {order: DESCENDING, activeFrom: {}}) {\n                  executionRoot {\n                    activeFrom\n                    activeTo\n                  }\n                }\n              }\n            }\n      ","transformation":"\n          {data:[ .set.items[] | {\n            id: {keyId: \"id\", intId:.id, valueId: .id, value: .id},\n            activeFrom: {keyId: \"activeFrom\", intId: .id, valueId: .executionRoot.activeFrom, value: .executionRoot.activeFrom},\n            activeTo: {keyId: \"activeTo\", intId: .id, valueId: .executionRoot.activeTo, value: .executionRoot.activeTo},\n            state: {keyId: \"state\", intId: .id, valueId: (if (.executionRoot.activeTo != null) then  \"dokončená\" else \"běží\" end) , value: (if (.executionRoot.activeTo != null) then  \"dokončená\" else \"běží\" end)}\n          } ]}\n      ","config":{"columns":[{"Header":"čas spuštění","accessor":"activeFrom"},{"Header":"status","accessor":"state"}]},"position":{"x":8,"y":0,"height":10,"width":6},"chartProps":{"title":"průběh aktualizací ze SAP","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"rowsInTable":10}},{"id":"updatedDevicesCount","type":"BarChart","overviewModule":"DEVI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query SAPUpdatedCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: { didFilter: { ids: [\"information:system.inv.node_changed\"] } }\n            time: $time\n          ) {\n            groupByObjectCoreElement {\n              key {\n                ... on SingleCoreElementKey {\n                  bucket {\n                    id\n                  }\n                }\n              }\n              set {\n                splitByTimestampInterval(\n                  split: {\n                    flexible: {\n                      granularity: { calendarInterval: { time: DAY } }\n                      showEmpty: true\n                      size: 100\n                    }\n                  }\n                ) {\n                  from\n                  to\n                  granularity {\n                    interval {\n                      quantity\n                      time\n                    }\n                  }\n                  set {\n                    count\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .diosSet.groupByObjectCoreElement[] | select(.key.bucket.id == \"device\").set.splitByTimestampInterval[] |\n          {\n            id: .from,\n            \"aktualizovaná zařízení\": .set.count\n          }\n        ]}\n      ","position":{"x":0,"y":10,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet aktualizovaných zařízení ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"insertedDevicesCount","type":"BarChart","overviewModule":"DEVI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query SAPCreatedCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: { didFilter: { ids: [\"information:system.inv.node_created\"] } }\n            time: $time\n          ) {\n            groupByObjectCoreElement {\n              key {\n                ... on SingleCoreElementKey {\n                  bucket {\n                    id\n                  }\n                }\n              }\n              set {\n                splitByTimestampInterval(\n                  split: {\n                    flexible: {\n                      granularity: { calendarInterval: { time: DAY } }\n                      showEmpty: true\n                      size: 100\n                    }\n                  }\n                ) {\n                  from\n                  to\n                  granularity {\n                    interval {\n                      quantity\n                      time\n                    }\n                  }\n                  set {\n                    count\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .diosSet.groupByObjectCoreElement[] | select(.key.bucket.id == \"device\").set.splitByTimestampInterval[] |\n          {\n            id: .from,\n            \"nová zařízení\": .set.count\n          }\n        ]}\n      ","position":{"x":10,"y":10,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet nově vložených zařízení ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"sapSystemDeviEventsCount","type":"PieChart","overviewModule":"DEVI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query sapDEVISystemEventsCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:system.inv.node_changed\"\n                  \"information:system.inv.node_created\"\n                  \"information:system.integrator.SAP_device_update_failed\"\n                  \"information:system.integrator.SAP_new_device_missing_mandatory_params\"\n                  \"information:system.integrator.SAP_new_device_kind_unrecognized\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            count\n            groupByObjectCoreElement {\n              key {\n                ... on SingleCoreElementKey {\n                  bucket {\n                    id\n                  }\n                }\n              }\n              set {\n                count\n                groupByDid {\n                  key {\n                    ... on SingleDidKey {\n                      bucket {\n                        id\n                        localization {\n                          abbreviation\n                        }\n                      }\n                    }\n                  }\n                  set {\n                    count\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .diosSet.groupByObjectCoreElement[] | select(.key.bucket.id == \"device\").set.groupByDid[] |\n          {\n            id: .key.bucket.id,\n            name: .key.bucket.localization.abbreviation,\n            value: .set.count\n          }\n        ]}\n      ","position":{"x":0,"y":0,"height":10,"width":8},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"počty událostí ze SAP pro zařízení","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"devicesSapErrorCount","type":"BarChart","overviewModule":"DEVI","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query devicesSapErrorCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:system.integrator.SAP_new_device_missing_mandatory_params\"\n                  \"information:system.integrator.SAP_new_device_kind_unrecognized\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              to\n              granularity {\n                interval {\n                  quantity\n                  time\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"počet chyb","value":"$.set.count"}]}],"position":{"x":0,"y":18,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet událostí s výskytem chyby při vkládání nového zařízení ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"devicesSapMalformedCount","type":"BarChart","overviewModule":"DEVI","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\"information:system.integrator.SAP_malformed_record_received\"]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              to\n              granularity {\n                interval {\n                  quantity\n                  time\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"počet poškozených záznamů","value":"$.set.count"}]}],"position":{"x":10,"y":18,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet událostí o obdržení poškozených záznamů ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','aktualizace SAP', 'zařízení aktualizace SAP','DEVI',ARRAY['DEVI_VIEW', 'DEVI_USER','DEVI_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"deviTemplatesReport","techDescription":"Devices templates","title":"šablony","keywords":["kpi chart","devi","templates"],"canvasSettings":{"rows":12,"columns":12},"version":"1.0.0","widgets":[{"id":"deviTemplates","type":"TableWidget","overviewModule":"DEVI","overviewId":"","includedFilters":[],"language":"jq","query":"\n        query templates {\n          elements {\n            ... on Template {\n              id\n              localization {\n                name\n              }\n              instancesSatisfySet(edge: {existsNow: {}}) {\n                count\n              }\n              instancesShouldSatisfySet(edge: {existsNow: {}}) {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{data: [ [.elements[] | select( .id | startswith(\"template:template.device\"))] | .[] | { id, title: {value: .localization.name}, shouldSatisfyDevices: {value: .instancesShouldSatisfySet.count}, satisfyDevices: {value: .instancesSatisfySet.count} }]}","config":{"columns":[{"Header":"název šablony","accessor":"title"},{"Header":"přiřazená zařízení","accessor":"shouldSatisfyDevices","width":130},{"Header":"odpovídající zařízení","accessor":"satisfyDevices","width":130}]},"position":{"x":0,"y":0,"height":7,"width":7},"chartProps":{"title":"šablony zařízení","rowsInTable":10,"showBorder":true,"showExport":false,"enableImport":true,"showPageSize":true,"showPagination":true}}]}', 'SYSTEM','šablony', 'devices templates','DEVI',ARRAY['DEVI_VIEW', 'DEVI_USER','DEVI_ADMIN'], ARRAY['SYSTEM']);

-- EVEN
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"evenOverviewReport","techDescription":"Events overview","title":"přehled","keywords":["kpi chart","events","overview"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"totalEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time","info","device","place"],"language":"jq","query":"\n        query totalEventsCount(\n          $time: TimeDelimitation\n          $informationSetFilter: DioFilter!\n        ) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                $informationSetFilter\n                {\n                  didFilter: {\n                    ids: [\n                      \"information:electricity.load_control.disconnector.button_local_off\"\n                      \"information:electricity.load_control.disconnector.button_local_on\"\n                      \"information:electricity.load_control.disconnector.remote_off_sent\"\n                      \"information:electricity.load_control.limiter.over_current_cleared_phase_1\"\n                      \"information:electricity.load_control.limiter.over_current_cleared_phase_2\"\n                      \"information:electricity.load_control.limiter.over_current_cleared_phase_3\"\n                      \"information:electricity.load_control.limiter.over_current_phase_1\"\n                      \"information:electricity.load_control.limiter.over_current_phase_2\"\n                      \"information:electricity.load_control.limiter.over_current_phase_3\"\n                      \"information:electricity.load_control.limiter.passive_limiter_activated_to_meter\"\n                      \"information:electricity.load_control.limiter.passive_limiter_set_to_meter\"\n                      \"information:electricity.load_control.relay1_changed\"\n                      \"information:electricity.load_control.relay2_changed\"\n                      \"information:electricity.load_control.relay2_off_relay1_off\"\n                      \"information:electricity.load_control.relay2_off_relay1_on\"\n                      \"information:electricity.load_control.relay2_off_relay1_unchanged\"\n                      \"information:electricity.load_control.relay2_on_relay1_off\"\n                      \"information:electricity.load_control.relay2_on_relay1_on\"\n                      \"information:electricity.load_control.relay2_on_relay1_unchanged\"\n                      \"information:electricity.load_control.relay2_unchanged_relay1_off\"\n                      \"information:electricity.load_control.relay2_unchanged_relay1_on\"\n                      \"information:electricity.load_control.tariff_changed\"\n                      \"information:electricity.load_control.tariff_switching_error\"\n                      \"information:electricity.load_control.tariff_switching_error_cleared\"\n                      \"information:electricity.load_control.time_TOU_error\"\n                      \"information:electricity.load_control.time_TOU_error_cleared\"\n                      \"information:electricity.load_control.tou_table_activated\"\n                      \"information:electricity.power.power_off\"\n                      \"information:electricity.power.power_off_cleared\"\n                      \"information:electricity.service_entry.cover_closed\"\n                      \"information:electricity.service_entry.cover_removed\"\n                      \"information:electricity.service_entry.optical_port_connected\"\n                      \"information:electricity.service_entry.pda_disconnected\"\n                      \"information:electricity.tamper.dc_field_detected\"\n                      \"information:electricity.under_voltage_cleared_phase_1\"\n                      \"information:electricity.under_voltage_cleared_phase_2\"\n                      \"information:electricity.under_voltage_cleared_phase_3\"\n                      \"information:electricity.under_voltage_phase_1\"\n                      \"information:electricity.under_voltage_phase_2\"\n                      \"information:electricity.under_voltage_phase_3\"\n                      \"information:electricity.voltage.missing_voltage_cleared_phase_1\"\n                      \"information:electricity.voltage.missing_voltage_cleared_phase_2\"\n                      \"information:electricity.voltage.missing_voltage_cleared_phase_3\"\n                      \"information:electricity.voltage.missing_voltage_phase_1\"\n                      \"information:electricity.voltage.missing_voltage_phase_2\"\n                      \"information:electricity.voltage.missing_voltage_phase_3\"\n                      \"information:electricity.voltage.over_voltage_cleared_phase_1\"\n                      \"information:electricity.voltage.over_voltage_cleared_phase_2\"\n                      \"information:electricity.voltage.over_voltage_cleared_phase_3\"\n                      \"information:electricity.voltage.over_voltage_phase_1\"\n                      \"information:electricity.voltage.over_voltage_phase_2\"\n                      \"information:electricity.voltage.over_voltage_phase_3\"\n                      \"information:information_technology.network.communication.meter_reading_internal_communication_fixed\"\n                      \"information:information_technology.network.communication.meter_reading_internal_communication_problem\"\n                      \"information:space_and_time.time.clock_adjusted\"\n                      \"information:space_and_time.time.clock_invalidated\"\n                      \"information:space_and_time.time.clock_invalidated_cleared\"\n                      \"information:sensors.corinex.unknown_push_event_received\"\n                      \"information:sensors.corinex.unknown_device_push_event_received\"\n                    ]\n                  }\n                }\n              ]\n            }\n          ) {\n            count\n          }\n        }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.count }}","position":{"x":0,"y":0,"height":4,"width":4},"chartProps":{"title":"celkový počet událostí","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalErrorEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time","info","device","place"],"language":"jq","query":"\n        query totalErrorEventsCount(\n          $time: TimeDelimitation\n          $informationSetFilter: DioFilter!\n        ) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                $informationSetFilter\n                {\n                  didFilter: {\n                    ids: [\n                      \"information:electricity.load_control.tariff_switching_error\"\n                      \"information:electricity.load_control.time_TOU_error\"\n                      \"information:information_technology.network.communication.meter_reading_internal_communication_problem\"\n                      \"information:space_and_time.time.clock_invalidated\"\n                      \"information:sensors.corinex.unknown_push_event_received\"\n                      \"information:sensors.corinex.unknown_device_push_event_received\"\n                    ]\n                  }\n                }\n              ]\n            }\n          ) {\n            count\n          }\n        }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.count }}","position":{"x":4,"y":0,"height":4,"width":4},"chartProps":{"title":"počet chybových událostí","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalUnknownEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time","info","device","place"],"language":"jq","query":"\n        query totalUnknownEventsCount(\n          $time: TimeDelimitation\n          $informationSetFilter: DioFilter!\n        ) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                $informationSetFilter\n                {\n                  didFilter: {\n                    ids: [\"information:sensors.corinex.unknown_push_event_received\"]\n                  }\n                }\n              ]\n            }\n          ) {\n            count\n          }\n        }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.count }}","position":{"x":8,"y":0,"height":4,"width":4},"chartProps":{"title":"počet neznámých událostí","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalUnknownDeviceEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time","info","device","place"],"language":"jq","query":"\n        query totalUnknownDeviceEventsCount(\n          $time: TimeDelimitation\n          $informationSetFilter: DioFilter!\n        ) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                $informationSetFilter\n                {\n                  didFilter: {\n                    ids: [\n                      \"information:sensors.corinex.unknown_device_push_event_received\"\n                    ]\n                  }\n                }\n              ]\n            }\n          ) {\n            count\n          }\n        }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.count }}","position":{"x":12,"y":0,"height":4,"width":4},"chartProps":{"title":"počet událostí neznámých zařízení","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"errorEventsCountByDid","type":"PieChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time","info","device","place"],"language":"jsonpath","rootPath":"$.diosSet.groupByDid[*]","query":"\n        query errorEventsCountByDid(\n          $time: TimeDelimitation\n          $informationSetFilter: DioFilter!\n        ) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                $informationSetFilter\n                {\n                  didFilter: {\n                    ids: [\n                      \"information:electricity.load_control.tariff_switching_error\"\n                      \"information:electricity.load_control.time_TOU_error\"\n                      \"information:information_technology.network.communication.meter_reading_internal_communication_problem\"\n                      \"information:space_and_time.time.clock_invalidated\"\n                      \"information:sensors.corinex.unknown_push_event_received\"\n                      \"information:sensors.corinex.unknown_device_push_event_received\"\n                    ]\n                  }\n                }\n              ]\n            }\n          ) {\n            count\n            groupByDid(size: 10000) {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      name\n                    }\n                  }\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"pie","type":"object","values":[{"key":"id","value":"$.key.bucket.id"},{"key":"name","value":"$.key.bucket.localization.name"},{"key":"value","value":"$.set.count"}]}],"position":{"x":8,"y":4,"height":10,"width":10},"chartProps":{"colors":["#FFF2AD","#FFE972","#FFD665","#FEAE5D","#F8925C","#FD845D","#D9A051","#AC772D","#A56813"],"title":"chybové události","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"eventsByCount","type":"TableWidget","overviewModule":"MONI","overviewId":"","includedFilters":["time","info","device","place"],"language":"jq","query":"\n        query eventsByCount(\n          $time: TimeDelimitation\n          $informationSetFilter: DioFilter!\n        ) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                $informationSetFilter\n                {\n                  didFilter: {\n                    ids: [\n                      \"information:electricity.load_control.disconnector.button_local_off\"\n                      \"information:electricity.load_control.disconnector.button_local_on\"\n                      \"information:electricity.load_control.disconnector.remote_off_sent\"\n                      \"information:electricity.load_control.limiter.over_current_cleared_phase_1\"\n                      \"information:electricity.load_control.limiter.over_current_cleared_phase_2\"\n                      \"information:electricity.load_control.limiter.over_current_cleared_phase_3\"\n                      \"information:electricity.load_control.limiter.over_current_phase_1\"\n                      \"information:electricity.load_control.limiter.over_current_phase_2\"\n                      \"information:electricity.load_control.limiter.over_current_phase_3\"\n                      \"information:electricity.load_control.limiter.passive_limiter_activated_to_meter\"\n                      \"information:electricity.load_control.limiter.passive_limiter_set_to_meter\"\n                      \"information:electricity.load_control.relay1_changed\"\n                      \"information:electricity.load_control.relay2_changed\"\n                      \"information:electricity.load_control.relay2_off_relay1_off\"\n                      \"information:electricity.load_control.relay2_off_relay1_on\"\n                      \"information:electricity.load_control.relay2_off_relay1_unchanged\"\n                      \"information:electricity.load_control.relay2_on_relay1_off\"\n                      \"information:electricity.load_control.relay2_on_relay1_on\"\n                      \"information:electricity.load_control.relay2_on_relay1_unchanged\"\n                      \"information:electricity.load_control.relay2_unchanged_relay1_off\"\n                      \"information:electricity.load_control.relay2_unchanged_relay1_on\"\n                      \"information:electricity.load_control.tariff_changed\"\n                      \"information:electricity.load_control.tariff_switching_error\"\n                      \"information:electricity.load_control.tariff_switching_error_cleared\"\n                      \"information:electricity.load_control.time_TOU_error\"\n                      \"information:electricity.load_control.time_TOU_error_cleared\"\n                      \"information:electricity.load_control.tou_table_activated\"\n                      \"information:electricity.power.power_off\"\n                      \"information:electricity.power.power_off_cleared\"\n                      \"information:electricity.service_entry.cover_closed\"\n                      \"information:electricity.service_entry.cover_removed\"\n                      \"information:electricity.service_entry.optical_port_connected\"\n                      \"information:electricity.service_entry.pda_disconnected\"\n                      \"information:electricity.tamper.dc_field_detected\"\n                      \"information:electricity.under_voltage_cleared_phase_1\"\n                      \"information:electricity.under_voltage_cleared_phase_2\"\n                      \"information:electricity.under_voltage_cleared_phase_3\"\n                      \"information:electricity.under_voltage_phase_1\"\n                      \"information:electricity.under_voltage_phase_2\"\n                      \"information:electricity.under_voltage_phase_3\"\n                      \"information:electricity.voltage.missing_voltage_cleared_phase_1\"\n                      \"information:electricity.voltage.missing_voltage_cleared_phase_2\"\n                      \"information:electricity.voltage.missing_voltage_cleared_phase_3\"\n                      \"information:electricity.voltage.missing_voltage_phase_1\"\n                      \"information:electricity.voltage.missing_voltage_phase_2\"\n                      \"information:electricity.voltage.missing_voltage_phase_3\"\n                      \"information:electricity.voltage.over_voltage_cleared_phase_1\"\n                      \"information:electricity.voltage.over_voltage_cleared_phase_2\"\n                      \"information:electricity.voltage.over_voltage_cleared_phase_3\"\n                      \"information:electricity.voltage.over_voltage_phase_1\"\n                      \"information:electricity.voltage.over_voltage_phase_2\"\n                      \"information:electricity.voltage.over_voltage_phase_3\"\n                      \"information:information_technology.network.communication.meter_reading_internal_communication_fixed\"\n                      \"information:information_technology.network.communication.meter_reading_internal_communication_problem\"\n                      \"information:space_and_time.time.clock_adjusted\"\n                      \"information:space_and_time.time.clock_invalidated\"\n                      \"information:space_and_time.time.clock_invalidated_cleared\"\n                      \"information:sensors.corinex.unknown_push_event_received\"\n                      \"information:sensors.corinex.unknown_device_push_event_received\"\n                    ]\n                  }\n                }\n              ]\n            }\n          ) {\n            count\n            groupByDid(size: 15000, ordering: DESCENDING) {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      name\n                    }\n                  }\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"\n        {data:[ .diosSet.groupByDid[] | {\n          id: {keyId: \"internalId\", intId: .key.bucket.internalId, valueId: .key.bucket.id, value: .key.bucket.id},\n          \"name\": {keyId: \"taskname\", intId: .key.bucket.id, valueId: .key.bucket.localization.name, value: .key.bucket.localization.name},\n          \"count\": {keyId: \"taskcount\", intId: .key.bucket.id, valueId: .set.count, value: .set.count},\n        } ]}\n      ","config":{"columns":[{"Header":"název události","accessor":"name"},{"Header":"četnost","accessor":"count","width":60}]},"position":{"x":0,"y":4,"height":16,"width":8},"chartProps":{"title":"nejčastější události","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"rowsInTable":12}}]}', 'SYSTEM','přehled', 'events overview','EVEN',ARRAY['EVEN_VIEW', 'EVEN_USER','EVEN_ADMIN'], ARRAY['SYSTEM']);
--insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"evenOverviewReport","techDescription":"Events module overview report","title":"Events overview","keywords":["kpi chart","events","overview"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"totalEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query pushEventsTotalCount($time: TimeDelimitation) {\n            diosSet(time: $time, filter: {didFilter: {ids: [\"information:electricity.load_control.disconnector.button_local_off\", \"information:electricity.load_control.disconnector.button_local_on\", \"information:electricity.load_control.disconnector.remote_off_sent\", \"information:electricity.load_control.limiter.over_current_cleared_phase_1\", \"information:electricity.load_control.limiter.over_current_cleared_phase_2\", \"information:electricity.load_control.limiter.over_current_cleared_phase_3\", \"information:electricity.load_control.limiter.over_current_phase_1\", \"information:electricity.load_control.limiter.over_current_phase_2\", \"information:electricity.load_control.limiter.over_current_phase_3\", \"information:electricity.load_control.limiter.passive_limiter_activated_to_meter\", \"information:electricity.load_control.limiter.passive_limiter_set_to_meter\", \"information:electricity.load_control.relay1_changed\", \"information:electricity.load_control.relay2_changed\", \"information:electricity.load_control.relay2_off_relay1_off\", \"information:electricity.load_control.relay2_off_relay1_on\", \"information:electricity.load_control.relay2_off_relay1_unchanged\", \"information:electricity.load_control.relay2_on_relay1_off\", \"information:electricity.load_control.relay2_on_relay1_on\", \"information:electricity.load_control.relay2_on_relay1_unchanged\", \"information:electricity.load_control.relay2_unchanged_relay1_off\", \"information:electricity.load_control.relay2_unchanged_relay1_on\", \"information:electricity.load_control.tariff_changed\", \"information:electricity.load_control.tariff_switching_error\", \"information:electricity.load_control.tariff_switching_error_cleared\", \"information:electricity.load_control.time_TOU_error\", \"information:electricity.load_control.time_TOU_error_cleared\", \"information:electricity.load_control.tou_table_activated\", \"information:electricity.power.power_off\", \"information:electricity.power.power_off_cleared\", \"information:electricity.service_entry.cover_closed\", \"information:electricity.service_entry.cover_removed\", \"information:electricity.service_entry.optical_port_connected\", \"information:electricity.service_entry.pda_disconnected\", \"information:electricity.tamper.dc_field_detected\", \"information:electricity.under_voltage_cleared_phase_1\", \"information:electricity.under_voltage_cleared_phase_2\", \"information:electricity.under_voltage_cleared_phase_3\", \"information:electricity.under_voltage_phase_1\", \"information:electricity.under_voltage_phase_2\", \"information:electricity.under_voltage_phase_3\", \"information:electricity.voltage.missing_voltage_cleared_phase_1\", \"information:electricity.voltage.missing_voltage_cleared_phase_2\", \"information:electricity.voltage.missing_voltage_cleared_phase_3\", \"information:electricity.voltage.missing_voltage_phase_1\", \"information:electricity.voltage.missing_voltage_phase_2\", \"information:electricity.voltage.missing_voltage_phase_3\", \"information:electricity.voltage.over_voltage_cleared_phase_1\", \"information:electricity.voltage.over_voltage_cleared_phase_2\", \"information:electricity.voltage.over_voltage_cleared_phase_3\", \"information:electricity.voltage.over_voltage_phase_1\", \"information:electricity.voltage.over_voltage_phase_2\", \"information:electricity.voltage.over_voltage_phase_3\", \"information:information_technology.network.communication.meter_reading_internal_communication_fixed\", \"information:information_technology.network.communication.meter_reading_internal_communication_problem\", \"information:space_and_time.time.clock_adjusted\", \"information:space_and_time.time.clock_invalidated\", \"information:space_and_time.time.clock_invalidated_cleared\", \"information:system.cc.unknown_push_event_received\"]}}) {\n              countp\n            }\n          }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.countp }}","position":{"x":0,"y":0,"height":4,"width":4},"chartProps":{"title":"celkový počet událostí","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalErrorEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n              query pushEventsGroupedByDid($time: TimeDelimitation) {\n                diosSet(time: $time, filter: {didFilter: {ids: [\"information:electricity.load_control.tariff_switching_error\",\"information:electricity.load_control.time_TOU_error\",\"information:information_technology.network.communication.meter_reading_internal_communication_problem\",\"information:space_and_time.time.clock_invalidated\"]}}) {\n                  countp\n                }\n              }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.countp }}","position":{"x":4,"y":0,"height":4,"width":4},"chartProps":{"title":"počet chybových událostí","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalUnknownEventsCount","type":"KpiChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n              query pushEventsGroupedByDid($time: TimeDelimitation) {\n                diosSet(time: $time, filter: {didFilter: {ids: [\"information:system.cc.unknown_push_event_received\"]}}) {\n                  countp\n                }\n              }\n      ","transformation":"{ data: { id: \"totalEventsCount\", value: .diosSet.countp }}","position":{"x":8,"y":0,"height":4,"width":4},"chartProps":{"title":"počet neznámých událostí","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"errorEventsCountByDid","type":"PieChart","overviewModule":"EVEN","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.groupByDidNew[*]","query":"\n              query errorEventsCountByDid($time: TimeDelimitation) {\n                diosSet(time: $time, filter: {didFilter: {ids: [\"information:electricity.load_control.tariff_switching_error\",\"information:electricity.load_control.time_TOU_error\",\"information:information_technology.network.communication.meter_reading_internal_communication_problem\",\"information:space_and_time.time.clock_invalidated\"]}}) {\n                  countp\n                  groupByDidNew (size: 10000) {\n                    key {\n                      ... on SingleDidKey {\n                        bucket {\n                          id\n                          localization {\n                            name\n                          }\n                        }\n                      }\n                    }\n                    set {\n                      count\n                    }\n                  }\n                }\n              }\n        ","jsonPathMapping":[{"key":"pie","type":"object","values":[{"key":"id","value":"$.key.bucket.id"},{"key":"name","value":"$.key.bucket.localization.name"},{"key":"value","value":"$.set.count"}]}],"position":{"x":8,"y":4,"height":10,"width":10},"chartProps":{"colors":["#FFF2AD","#FFE972","#FFD665","#FEAE5D","#F8925C","#FD845D","#D9A051","#AC772D","#A56813"],"title":"chybové události","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"eventsByCount","type":"TableWidget","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query pushEventsGroupedByDid($time: TimeDelimitation) {\n            diosSet(time: $time, filter: {didFilter: {ids: [\"information:electricity.load_control.disconnector.button_local_off\", \"information:electricity.load_control.disconnector.button_local_on\", \"information:electricity.load_control.disconnector.remote_off_sent\", \"information:electricity.load_control.limiter.over_current_cleared_phase_1\", \"information:electricity.load_control.limiter.over_current_cleared_phase_2\", \"information:electricity.load_control.limiter.over_current_cleared_phase_3\", \"information:electricity.load_control.limiter.over_current_phase_1\", \"information:electricity.load_control.limiter.over_current_phase_2\", \"information:electricity.load_control.limiter.over_current_phase_3\", \"information:electricity.load_control.limiter.passive_limiter_activated_to_meter\", \"information:electricity.load_control.limiter.passive_limiter_set_to_meter\", \"information:electricity.load_control.relay1_changed\", \"information:electricity.load_control.relay2_changed\", \"information:electricity.load_control.relay2_off_relay1_off\", \"information:electricity.load_control.relay2_off_relay1_on\", \"information:electricity.load_control.relay2_off_relay1_unchanged\", \"information:electricity.load_control.relay2_on_relay1_off\", \"information:electricity.load_control.relay2_on_relay1_on\", \"information:electricity.load_control.relay2_on_relay1_unchanged\", \"information:electricity.load_control.relay2_unchanged_relay1_off\", \"information:electricity.load_control.relay2_unchanged_relay1_on\", \"information:electricity.load_control.tariff_changed\", \"information:electricity.load_control.tariff_switching_error\", \"information:electricity.load_control.tariff_switching_error_cleared\", \"information:electricity.load_control.time_TOU_error\", \"information:electricity.load_control.time_TOU_error_cleared\", \"information:electricity.load_control.tou_table_activated\", \"information:electricity.power.power_off\", \"information:electricity.power.power_off_cleared\", \"information:electricity.service_entry.cover_closed\", \"information:electricity.service_entry.cover_removed\", \"information:electricity.service_entry.optical_port_connected\", \"information:electricity.service_entry.pda_disconnected\", \"information:electricity.tamper.dc_field_detected\", \"information:electricity.under_voltage_cleared_phase_1\", \"information:electricity.under_voltage_cleared_phase_2\", \"information:electricity.under_voltage_cleared_phase_3\", \"information:electricity.under_voltage_phase_1\", \"information:electricity.under_voltage_phase_2\", \"information:electricity.under_voltage_phase_3\", \"information:electricity.voltage.missing_voltage_cleared_phase_1\", \"information:electricity.voltage.missing_voltage_cleared_phase_2\", \"information:electricity.voltage.missing_voltage_cleared_phase_3\", \"information:electricity.voltage.missing_voltage_phase_1\", \"information:electricity.voltage.missing_voltage_phase_2\", \"information:electricity.voltage.missing_voltage_phase_3\", \"information:electricity.voltage.over_voltage_cleared_phase_1\", \"information:electricity.voltage.over_voltage_cleared_phase_2\", \"information:electricity.voltage.over_voltage_cleared_phase_3\", \"information:electricity.voltage.over_voltage_phase_1\", \"information:electricity.voltage.over_voltage_phase_2\", \"information:electricity.voltage.over_voltage_phase_3\", \"information:information_technology.network.communication.meter_reading_internal_communication_fixed\", \"information:information_technology.network.communication.meter_reading_internal_communication_problem\", \"information:space_and_time.time.clock_adjusted\", \"information:space_and_time.time.clock_invalidated\", \"information:space_and_time.time.clock_invalidated_cleared\", \"information:system.cc.unknown_push_event_received\"]}}) {\n              count\n              groupByDidNew (size: 15000, ordering: DESCENDING) {\n                key {\n                  ...on SingleDidKey {\n                    bucket {\n                      id\n                      localization {\n                        name\n                      }\n                    }\n                  }\n                }\n                set {\n                  count\n                }\n              }\n            }\n          }\n      ","transformation":"\n        {data:[ .diosSet.groupByDidNew[] | {\n          id: {keyId: \"internalId\", intId: .key.bucket.internalId, valueId: .key.bucket.id, value: .key.bucket.id},\n          \"name\": {keyId: \"taskname\", intId: .key.bucket.id, valueId: .key.bucket.localization.name, value: .key.bucket.localization.name},\n          \"count\": {keyId: \"taskcount\", intId: .key.bucket.id, valueId: .set.count, value: .set.count},\n        } ]}\n      ","config":{"columns":[{"Header":"název události","accessor":"name"},{"Header":"četnost","accessor":"count","width":60}]},"position":{"x":0,"y":4,"height":16,"width":8},"chartProps":{"title":"nejčastější události","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"rowsInTable":12}}]}', 'SYSTEM','přehled', 'events overview','EVEN',ARRAY['EVEN_VIEW', 'EVEN_USER','EVEN_ADMIN'], ARRAY['SYSTEM']);

-- Places reports
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"placOverviewReport","techDescription":"Places overview","title":"přehled","keywords":["kpi chart","places","count"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"placesCount","type":"KpiChart","overviewModule":"PLAC","overviewId":"","includedFilters":["place"],"language":"jsonpath","rootPath":"$.placesSet","query":"\n        query PlacesCount($placesSetFilter: InstancesSetPatternMatcher!) {\n          placesSet(filter: {AND: [$placesSetFilter, {node: {kindId: [\"place:place.consumption_point\",\"place:place.secondary_substation\"]}}]}) {\n            count\n          }\n        }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"plac.placesCount"},{"key":"value","value":"$[*].count"}]}],"position":{"x":0,"y":0,"height":3,"width":4},"chartProps":{"title":"aktuální počet míst","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"dtsCount","type":"KpiChart","overviewModule":"PLAC","overviewId":"","includedFilters":[],"language":"jsonpath","rootPath":"$.placesSet","query":"\n        query DTSCount {\n          placesSet(filter: {node: {kindId: [\"place:place.secondary_substation\"]}}) {\n            count\n          }\n        }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"plac.dtsCount"},{"key":"value","value":"$[*].count"}]}],"position":{"x":4,"y":0,"height":3,"width":4},"chartProps":{"title":"aktuální počet DTS","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}}]}', 'SYSTEM','přehled', 'Meters Pardubice','PLAC',ARRAY['PLAC_VIEW', 'PLAC_USER','PLAC_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"placStatisticsReport","title":"statistiky","techDescription":"Place statistics","keywords":["place","statistics"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"consumption.point.by.dts","language":"jq","overviewModule":"PLAC","overviewId":"","includedFilters":["place"],"position":{"x":0,"y":0,"height":8,"width":6},"type":"TableWidget","chartProps":{"title":"distribuční trafostanice","rowsInTable":7,"showBorder":true,"showExport":true,"showPagination":true,"showPageSize":false},"query":"\n        query consumptionPointsByDts($placesSetFilter: InstancesSetPatternMatcher!) {\n          placesSet(\n            filter: {\n              AND: [\n                $placesSetFilter\n                { node: { kindId: [\"place:place.secondary_substation\"] } }\n              ]\n            }\n          ) {\n            items {\n              internalId\n              attribute(did: \"information:attribute.sjz\") {\n                normalizedValue\n              }\n              relPlacesSet(\n                filter: { node: { kindId: [\"place:place.consumption_point\"] } }\n                walk: {\n                  path: { follow: { edge: { type: \"feed_from\", direction: IN } } }\n                }\n              ) {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"\n        {data: [\n          .placesSet.items[]\n          | {\n            id: {keyId: \"id\", intId: .internalId, valueId: .internalId, value: .internalId},\n            dts: {keyId: \"dts\", internalId: .internalId, valueId: .attribute.normalizedValue, value: .attribute.normalizedValue },\n            count: {keyId: \"count\", intId: .internalId, valueId: .relPlacesSet.count, value: .relPlacesSet.count}\n          }\n        ]}\n      ","config":{"columns":[{"Header":"DTS","accessor":"dts"},{"Header":"počet OM","accessor":"count"}]}},{"id":"consumption.point.by.template","language":"jq","type":"TableWidget","overviewModule":"PLAC","overviewId":"","includedFilters":["place"],"position":{"x":6,"y":0,"width":8,"height":8},"chartProps":{"title":"odběrná místa podle šablon","rowsInTable":7,"showBorder":true,"showExport":true,"showPagination":true,"showPageSize":false},"query":"\n        query consumptionPoint($placesSetFilter: InstancePatternMatcher!) {\n          templates {\n            localization {\n              name\n            }\n            id\n            instancesShouldSatisfySet(\n              filter: {\n                AND: [\n                  $placesSetFilter\n                  { node: { kindId: [\"place:place.consumption_point\"] } }\n                ]\n              }\n            ) {\n              count\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .templates[]\n          | select(.instancesShouldSatisfySet.count > 0) |\n          {\n            id: {keyId: \"id\", valueId: .id, value: .id},\n            template: {keyId: \"template\", valueId: .id ,value: .localization.name},\n            count: {keyId: \"count\", valueId: .instancesShouldSatisfySet.count, value: .instancesShouldSatisfySet.count}}\n        ]}\n      ","config":{"columns":[{"Header":"šablona","accessor":"template"},{"Header":"počet míst","accessor":"count","width":80}]}},{"id":"consumption.point.by.tariff","type":"SunburstChart","language":"jq","overviewModule":"PLAC","overviewId":"","includedFilters":["place"],"position":{"x":0,"y":8,"width":12,"height":16},"chartProps":{"title":"počty odběrných míst podle tarifu","widgetStyle":"","showBorder":true,"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"legendShow":false,"enableLegendHiding":false,"enableDataSelection":false,"enableDataLabels":true,"enableTooltip":true,"enableLabelRotation":"radial"},"query":"\n        query consumptionPointsByTariff($placesSetFilter: InstancesSetPatternMatcher!) {\n          placesSet(\n            filter: {\n              AND: [\n                $placesSetFilter\n                { node: { kindId: [\"place:place.secondary_substation\"] } }\n              ]\n            }\n          ) {\n            items {\n              id {\n                value\n              }\n              relPlacesSet(\n                filter: { node: { kindId: [\"place:place.consumption_point\"] } }\n                walk: {\n                  path: { follow: { edge: { type: \"feed_from\", direction: IN } } }\n                }\n              ) {\n                groupByAttr(did: \"information:attribute.tariftype\") {\n                  attribute {\n                    normalizedValue\n                  }\n                  set {\n                    count\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        {data: [\n          .placesSet.items[] | {\n            name: .id.value,\n            children: [\n              .relPlacesSet.groupByAttr[] | {\n                name: .attribute.normalizedValue,\n                value: .set.count\n              }\n            ]\n          }\n        ]}\n      "}]}', 'SYSTEM','statistiky', 'Statistiky míst','PLAC',ARRAY['PLAC_VIEW', 'PLAC_USER','PLAC_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"placSapActualisationReport","techDescription":"Places SAP actualisation","title":"aktualizace SAP","keywords":["kpi chart","place","SAP"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"sapPlacTaskOverview","type":"TableWidget","overviewModule":"PLAC","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n            query sapPlacTaskOverview($time: TaskTimeDelimitation) {\n              set: taskExecutionsSet(time: $time, filter: {templateId: [\"synchronization_sap.v1\"]}) {\n                count\n                items(ordering: {order: DESCENDING, activeFrom: {}}) {\n                  executionRoot {\n                    activeFrom\n                    activeTo\n                  }\n                }\n              }\n            }\n      ","transformation":"\n          {data:[ .set.items[] | {\n            id: {keyId: \"id\", intId:.id, valueId: .id, value: .id},\n            activeFrom: {keyId: \"activeFrom\", intId: .id, valueId: .executionRoot.activeFrom, value: .executionRoot.activeFrom},\n            activeTo: {keyId: \"activeTo\", intId: .id, valueId: .executionRoot.activeTo, value: .executionRoot.activeTo},\n            state: {keyId: \"state\", intId: .id, valueId: (if (.executionRoot.activeTo != null) then  \"dokončená\" else \"běží\" end) , value: (if (.executionRoot.activeTo != null) then  \"dokončená\" else \"běží\" end)}\n          } ]}\n      ","config":{"columns":[{"Header":"čas spuštění","accessor":"activeFrom"},{"Header":"status","accessor":"state"}]},"position":{"x":8,"y":0,"height":10,"width":6},"chartProps":{"title":"průběh aktualizací ze SAP","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"rowsInTable":10}},{"id":"updatedPlacesCount","type":"BarChart","overviewModule":"PLAC","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query SAPUpdatedCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: { ids: [\"information:system.inv.node_changed\"] }\n              objectFilter: {\n                kinds: [\n                  \"place:place.secondary_substation\"\n                  \"place:place.consumption_point\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              to\n              granularity {\n                interval {\n                  quantity\n                  time\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .diosSet.splitByTimestampInterval[] |\n          {\n            id: .from,\n            \"aktualizovaná místa\": .set.count\n          }\n        ]}\n      ","position":{"x":0,"y":10,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet aktualizovaných míst ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"insertedPlacesCount","type":"BarChart","overviewModule":"PLAC","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query SAPCreatedCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: { ids: [\"information:system.inv.node_created\"] }\n              objectFilter: {\n                kinds: [\n                  \"place:place.secondary_substation\"\n                  \"place:place.consumption_point\"\n                ]\n              }\n            }\n\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              to\n              granularity {\n                interval {\n                  quantity\n                  time\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .diosSet.splitByTimestampInterval[] |\n          {\n            id: .from,\n            \"nová místa\": .set.count\n          }\n        ]}\n      ","position":{"x":10,"y":10,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet nově vložených míst ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"sapSystemPlacEventsCount","type":"PieChart","overviewModule":"PLAC","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query SapPLACSystemEventsCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:system.inv.node_changed\"\n                  \"information:system.inv.node_created\"\n                  \"information:system.integrator.SAP_place_update_failed\"\n                  \"information:system.integrator.SAP_new_place_missing_mandatory_params\"\n                  \"information:system.integrator.SAP_new_place_kind_unrecognized\"\n                ]\n              }\n              objectFilter: {\n                kinds: [\n                  \"place:place.secondary_substation\"\n                  \"place:place.consumption_point\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            count\n            groupByDid {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      abbreviation\n                    }\n                  }\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"\n        { data: [\n          .diosSet.groupByDid[] |\n          {\n            id: .key.bucket.id,\n            name: .key.bucket.localization.abbreviation,\n            value: .set.count\n          }\n        ]}\n      ","position":{"x":0,"y":0,"height":10,"width":8},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"počty událostí ze SAP na místech","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"placesSapErrorCount","type":"BarChart","overviewModule":"PLAC","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query placesSapErrorCount($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:system.integrator.SAP_new_place_missing_mandatory_params\"\n                  \"information:system.integrator.SAP_new_place_kind_unrecognized\"\n                ]\n              }\n              objectFilter: {\n                kinds: [\n                  \"place:place.secondary_substation\"\n                  \"place:place.consumption_point\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              to\n              granularity {\n                interval {\n                  quantity\n                  time\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"počet chyb","value":"$.set.count"}]}],"position":{"x":0,"y":18,"height":8,"width":10},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet událostí s výskytem chyby při vkládání nového místa ze SAP","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','aktualizace SAP', 'místa aktualizace SAP','PLAC',ARRAY['PLAC_VIEW', 'PLAC_USER','PLAC_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"placTemplatesReport","techDescription":"Place templates","title":"šablony","keywords":["kpi chart","plac","templates"],"canvasSettings":{"rows":12,"columns":12},"version":"1.0.0","widgets":[{"id":"placTemplates","type":"TableWidget","overviewModule":"PLAC","overviewId":"","language":"jq","includedFilters":[],"query":"\n        query templates {\n          elements {\n            ... on Template {\n              id\n              localization {\n                name\n              }\n              instancesSatisfySet(edge: {existsNow: {}}) {\n                count\n              }\n              instancesShouldSatisfySet(edge: {existsNow: {}}) {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{data: [ [.elements[] | select( .id | startswith(\"template:template.place\"))] | .[] | { id, title: {value: .localization.name}, shouldSatisfyPlaces: {value: .instancesShouldSatisfySet.count}, satisfyPlaces: {value: .instancesSatisfySet.count} }]}","config":{"columns":[{"Header":"název šablony","accessor":"title"},{"Header":"přiřazená místa","accessor":"shouldSatisfyPlaces","width":130},{"Header":"odpovídající místa","accessor":"satisfyPlaces","width":130}]},"position":{"x":0,"y":0,"height":7,"width":7},"chartProps":{"title":"šablony míst","rowsInTable":10,"enableImport":true,"showBorder":true,"showExport":false,"showPageSize":true,"showPagination":true}}]}', 'SYSTEM','šablony', 'Šablony míst','PLAC',ARRAY['PLAC_VIEW', 'PLAC_USER','PLAC_ADMIN'], ARRAY['SYSTEM']);

-- Load reports
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"loadOverviewReport","techDescription":"Load overview","title":"přehled","keywords":["kpi chart","om","overview"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"omInvalidTou","type":"KpiChart","overviewModule":"LOAD","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet","query":"query omInvalidTou($time: TimeDelimitation!) {\n                  diosSet(filter: {didFilter: {\n                    ids: [\"information:electricity.load_control.register_tou_id_and_evidenced_switching_plan_id_differed\"]\n                  }},time: $time) {\n                  count\n                  }\n                }","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"load.omInvalidTou"},{"key":"value","value":"$[*].count"}]}],"position":{"x":0,"y":0,"height":4,"width":5},"chartProps":{"title":"OM s nesprávnou TOU","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"omInvalidSwitching","type":"KpiChart","overviewModule":"LOAD","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet","query":"query omWithInvalidSwitching($time: TimeDelimitation!) {\n                  diosSet(filter: {didFilter: {\n                    ids: [\"information:electricity.load_control.load_switching_follows_timeline_logical_and_1_days\"]\n                  }, valueFilter: {keyword: {equals: \"not_ok\"}}},time: $time) {\n                  count\n                  }\n                }","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"load.omInvalidSwitching"},{"key":"value","value":"$[*].count"}]}],"position":{"x":5,"y":0,"height":4,"width":5},"chartProps":{"title":"počet OM s nesprávným spínáním","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"OmWith2TTarifType","type":"KpiChart","overviewModule":"LOAD","overviewId":"","includedFilters":["place"],"language":"jsonpath","rootPath":"$.set","query":"\n          query OmWith2TTarifType ($placesSetFilter: InstancesSetPatternMatcher!){\n            set: placesSet (filter: {AND: [\n              $placesSetFilter,\n              { node: { kindName: \"place:place.consumption_point\"}},\n              { node: {attrValue: {did: \"information:attribute.tariftype\", value: [\"PE8D25D\",\"PE8C25D\",\"PE8D57D\",\"PE8C57D\",\"PE8D45D\",\"PE8D45D\"]} }}\n            ]}) {\n              count\n            }\n          }\n        ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"load.om2T"},{"key":"value","value":"$[*].count"}]}],"position":{"x":10,"y":0,"height":4,"width":5},"chartProps":{"title":"počet OM s 2T sazbou","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"omInvalidTouBarChart","type":"BarChart","overviewModule":"LOAD","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query omWithInvalidTou($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:electricity.load_control.register_tou_id_and_evidenced_switching_plan_id_differed\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"odběrná místa","value":"$.set.count"}]}],"position":{"x":0,"y":4,"height":10,"width":12},"chartProps":{"colors":["#FFD38D","#BF5533","#F49A21","#BF5533","#EA873D","#D9752D","#BF5533","#B1423D","#923545","#FFC452"],"title":"počet OM s nesprávnou TOU","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"omInvalidTOUSwitchingBarChart","type":"BarChart","overviewModule":"LOAD","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query omWithInvalidTou($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:electricity.load_control.load_switching_follows_timeline_logical_and_1_days\"\n                ]\n              }\n              valueFilter: { keyword: { equals: \"not_ok\" } }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"odběrná místa","value":"$.set.count"}]}],"position":{"x":0,"y":14,"height":10,"width":12},"chartProps":{"colors":["#FFD38D","#BF5533","#F49A21","#BF5533","#EA873D","#D9752D","#BF5533","#B1423D","#923545","#FFC452"],"title":"počet OM, kde události o spínání neodpovídají odečtené TOU","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":"","minInterval":1},"yAxis":{"label":"počet","minInterval":1},"enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','přehled', 'Load overview','LOAD',ARRAY['LOAD_VIEW', 'LOAD_USER','LOAD_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"loadValidityReport","techDescription":"Load validity","title":"validnost","keywords":["kpi chart","om","validity"],"canvasSettings":{"rows":12,"columns":12},"version":"1.0.0","widgets":[{"id":"tableOmInvalidTou","type":"TableWidget","overviewModule":"LOAD","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.set.groupByObject[*]","query":"query omWithInvalidTou($time: TimeDelimitation!) {\n                    set: diosSet(filter: {didFilter: {ids: [\"information:electricity.load_control.register_tou_id_and_evidenced_switching_plan_id_differed\"]}}, time: $time) {\n                      groupByObject {\n                        key {\n                          ... on SingleInstanceKey {\n                            bucket {\n                              internalId\n                              id {\n                                did {\n                                  id\n                                }\n                                value\n                              }\n                              device: relInstance(edge: {type: \"installed_at\", direction: IN}) {\n                                ... on Device {\n                                  internalId\n                                  id {\n                                    did {\n                                      id\n                                    }\n                                    value\n                                  }\n                                  kind {\n                                    attributes (dids: [\"information:attribute.matnr\"]) {\n                                      did {\n                                        id\n                                      }\n                                      value\n                                    }\n                                  }\n                                  attributes(dids: [\"information:attribute.device_maintenance_status\"]) {\n                                    did {\n                                      id\n                                    }\n                                    normalizedValue\n                                  }\n                                }\n                              }\n                              dts: relInstance(edge: {type: \"feed_from\", direction: OUT}) {\n                                ... on Place {\n                                  internalId\n                                  id {\n                                    did {\n                                      id\n                                    }\n                                    value\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }\n                        set {\n                          items (ordering: {byField: TIMESTAMP, order: DESCENDING}) {\n                            id\n                            timestamp\n                            value {\n                              normalizedValue\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }","jsonPathMapping":[{"key":"table","type":"object","values":[{"key":"id","keyId":"id","intId":"$.key.bucket.internalId","valueId":"$.key.bucket.internalId","value":"$.key.bucket.internalId"},{"key":"om","keyId":"id","intId":"$.key.bucket.internalId","valueId":"$.key.bucket.id.did.id","value":"$.key.bucket.id.value"},{"key":"information:attribute.ckod","keyId":"information:attribute.ckod","intId":"$.key.bucket.device[0].internalId","valueId":"$.key.bucket.device[0].id.did.id","value":"$.key.bucket.device[0].id.value"},{"key":"feed_from","keyId":"feed_from","intId":"$.key.bucket.dts[0].internalId","valueId":"$.key.bucket.dts[0].id.did.id","value":"$.key.bucket.dts[0].id.value"},{"key":"material","keyId":"information:attribute.matnr","intId":"$.key.bucket.device[0].internalId","valueId":"$.key.bucket.device[0].kind.attributes[?(@.did.id == \"information:attribute.matnr\")].value","value":"$.key.bucket.device[0].kind.attributes[?(@.did.id == \"information:attribute.matnr\")].value"},{"key":"device_maintenance_status","keyId":"device_maintenance_status","intId":"$.key.bucket.device[0].attribute","valueId":"$.key.bucket.device[0].attributes[?(@.did.id == \"device_maintenance_status\")].normalizedValue","value":"$.key.bucket.device[0].attributes[?(@.did.id == \"device_maintenance_status\")].normalizedValue"},{"key":"last_readout","keyId":"last_readout","intId":"last_readout","valueId":"last_readout","value":"$.set.items[0].timestamp"},{"key":"expected_tou","keyId":"expected_tou","intId":"expected_tou","valueId":"expected_tou","value":"$.set.items[0].value.normalizedValue.expected_tou_ext_id"},{"key":"readout_tou","valueId":"readout_tou","intId":"readout_tou","keyId":"readout_tou","value":"$.set.items[0].value.normalizedValue.read_tou_ext_id"}]}],"config":{"columns":[{"Header":"OM","accessor":"om"},{"Header":"zařízení","accessor":"information:attribute.ckod"},{"Header":"napájeno z","accessor":"feed_from"},{"Header":"material","accessor":"material"},{"Header":"servisní stav","accessor":"device_maintenance_status"},{"Header":"posl. odečet","accessor":"last_readout"},{"Header":"očekávaná TOU","accessor":"expected_tou"},{"Header":"vyčtená TOU","accessor":"readout_tou"}]},"position":{"x":0,"y":0,"height":5,"width":10},"chartProps":{"title":"OM s nesprávnou TOU tabulkou","rowsInTable":6,"showBorder":true,"showExport":false,"showPageSize":false,"showPagination":false}},{"id":"tableOmInvalidSwitching","type":"TableWidget","overviewModule":"LOAD","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.set.groupByObject[*]","query":"query omWithMissingSwitchingPlan($time: TimeDelimitation!) {\n                    set: diosSet(filter: {didFilter: { ids: [\"information:electricity.load_control.load_switching_follows_timeline_logical_and_1_days\"]}, valueFilter: {keyword: {equals: \"not_ok\"}}}, time: $time) {\n                      groupByObject {\n                        key {\n                          ... on SingleInstanceKey {\n                            bucket {\n                              internalId\n                              id {\n                                did {\n                                  id\n                                }\n                                value\n                              }\n                              device: relInstance(edge: {type: \"installed_at\", direction: IN}) {\n                                ... on Device {\n                                  internalId\n                                  id {\n                                    did {\n                                      id\n                                    }\n                                    value\n                                  }\n                                  kind {\n                                    attributes (dids: [\"information:attribute.matnr\"]) {\n                                      did {\n                                        id\n                                      }\n                                      value\n                                    }\n                                  }\n                                  attributes(dids: [\"information:attribute.device_maintenance_status\"]) {\n                                    did {\n                                      id\n                                    }\n                                    normalizedValue\n                                  }\n                                }\n                              }\n                              dts: relInstance(edge: {type: \"feed_from\", direction: OUT}) {\n                                ... on Place {\n                                  internalId\n                                  id {\n                                    did {\n                                      id\n                                    }\n                                    value\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }\n                        set {\n                          groupByValue {\n                            key\n                            set {\n                              count\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }","jsonPathMapping":[{"key":"table","type":"object","values":[{"key":"id","keyId":"id","intId":"$.key.bucket.internalId","valueId":"$.key.bucket.id.value","value":"$.key.bucket.internalId"},{"key":"om","keyId":"id","intId":"$.key.bucket.internalId","valueId":"$.key.bucket.id.did.id","value":"$.key.bucket.id.value"},{"key":"information:attribute.ckod","keyId":"information:attribute.ckod","intId":"$.key.bucket.device[0].internalId","valueId":"$.key.bucket.device[0].id.did.id","value":"$.key.bucket.device[0].id.value"},{"key":"feed_from","keyId":"feed_from","intId":"$.key.bucket.dts[0].internalId","valueId":"$.key.bucket.dts[0].id.did.id","value":"$.key.bucket.dts[0].id.value"},{"key":"material","keyId":"information:attribute.matnr","intId":"$.key.bucket.device[0].internalId","valueId":"$.key.bucket.device[0].kind.attributes[?(@.did.id == \"information:attribute.matnr\")].value","value":"$.key.bucket.device[0].kind.attributes[?(@.did.id == \"information:attribute.matnr\")].value"},{"key":"device_maintenance_status","keyId":"device_maintenance_status","intId":"$.key.bucket.device[0].attribute","valueId":"$.key.bucket.device[0].attributes[?(@.did.id == \"device_maintenance_status\")].normalizedValue","value":"$.key.bucket.device[0].attributes[?(@.did.id == \"device_maintenance_status\")].normalizedValue"},{"key":"last_readout","value":""},{"key":"days_without_readout","keyId":"missing_switching_plan","valueId":"missing_switching_plan","value":"$.set.groupByValue[?(@.key == \"missing_switching_plan\")].set.count"},{"key":"days_ok","keyId":"ok","valueId":"ok","value":"$.set.groupByValue[?(@.key == \"ok\")].set.count"},{"key":"days_with_issue","keyId":"not_ok","valueId":"not_ok","value":"$.set.groupByValue[?(@.key == \"not_ok\")].set.count"},{"key":"days_without_dio","valueId":"not_enough_data","keyId":"not_enough_data","value":"$.set.groupByValue[?(@.key == \"not_enough_data\")].set.count"}]}],"config":{"columns":[{"Header":"OM","accessor":"om"},{"Header":"zařízení","accessor":"information:attribute.ckod"},{"Header":"napájeno z","accessor":"feed_from"},{"Header":"material","accessor":"material"},{"Header":"servisní stav","accessor":"device_maintenance_status"},{"Header":"posl. odečet","accessor":"last_readout"},{"Header":"dnů bez odečt. TOU","accessor":"days_without_readout"},{"Header":"dnů OK","accessor":"days_ok"},{"Header":"dnů s problémem","accessor":"days_with_issue"},{"Header":"dnů bez událostí","accessor":"days_without_dio"}]},"position":{"x":0,"y":5,"height":5,"width":10},"chartProps":{"title":"OM, kde události o spínání neodpovídají odečtené TOU","rowsInTable":6,"showBorder":true,"showExport":false,"showPageSize":false,"showPagination":false}}]}', 'SYSTEM','validnost', 'Load validity','LOAD',ARRAY['LOAD_VIEW', 'LOAD_USER','LOAD_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"title":"plány","version":"1.0.0","id":"load.tasks","canvasSettings":{"columns":24,"rows":24},"keywords":["load","tasks","switch"],"techDescription":"Load task management","widgets":[{"id":"load.tasks.switch","language":"jq","overviewModule":"LOAD","overviewId":"","type":"TableWidget","position":{"x":0,"y":0,"height":10,"width":10},"query":"\n        query LoadTaskPlans {\n          taskPlans(\n            filter: {\n              template: {\n                id: [\n                \"tou_validate_events_vs_switching_plan.v1\",\n                \"tou_send_switching_plan_to_place.v1\",\n                \"tou_send_switching_plan_planned_to_place.v1\",\n                \"dc.correct_switching_plan_inventory_edges.template\"\n                ]\n              }\n            }\n          ) {\n            id\n            template {\n              id\n              localization {\n                name\n              }\n            }\n            active\n            nextTriggerTime\n            filter\n            schedule\n          }\n        }\n      ","transformation":"\n         { data: [ .taskPlans[] |\n          {\n            id: {value: .id},\n            type: {value: .template.localization.name, valueId: .template.id},\n            schedule: {value: .schedule.expression, options: .schedule},\n            nextRun: {value: .nextTriggerTime},\n            state: {value: .active}\n          }\n        ]}\n      ","chartProps":{"rowsInTable":7,"showBorder":true,"showExport":false,"showPagination":true,"showPageSize":false,"title":"plány úloh řízení zátěže","editable":{"mutation":"EditTaskPlans","refetchQueries":["LoadTaskPlans"],"successMessage":"Úloha řízení zátěže byla změněna."}},"config":{"columns":[{"Header":"typ úlohy","accessor":"type"},{"Header":"perioda","accessor":"schedule"},{"Header":"příští běh","accessor":"nextRun"},{"Header":"stav","accessor":"state","editable":{"type":"boolean","trueLabel":"aktivní","falseLabel":"neaktivní","body":"{id: .id, active: .value}"}}]},"includedFilters":[]}]}', 'SYSTEM','plány', 'Load task plans','LOAD',ARRAY['LOAD_VIEW', 'LOAD_USER','LOAD_ADMIN'], ARRAY['SYSTEM']);

-- READ reports
--insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"readOverviewReport","techDescription":"readout overview report","title":"readout chart report","keywords":["kpi chart","readout","count"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"readout15Mwait6hours","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout15Mwait6hours($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"15Mwait6hours\", value: $val}}","position":{"x":0,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 6 hodinách","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout15Mwait1dayCount","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout15Mwait1day($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"15Mwait1day\", value: $val}}","position":{"x":4,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 1 dni","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":2,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout15Mwait3days","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout15Mwait1week($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"15Mwait3days\", value: $val}}","position":{"x":8,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 3 dnech","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout15Mwait1weekCount","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout15Mwait1week($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"15Mwait1week\", value: $val}}","position":{"x":12,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 1 týdnu","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait6hours","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout1Dwait6hours($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"1Dwait6hours\", value: $val}}","position":{"x":0,"y":3,"height":3,"width":4},"chartProps":{"title":"IEM REG po 6 hodinách","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait1day","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout1Dwait1day($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"1Dwait1day\", value: $val}}","position":{"x":4,"y":3,"height":3,"width":4},"chartProps":{"title":"IEM REG po 1 dni","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait3days","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout1Dwait3days($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"1Dwait3days\", value: $val}}","position":{"x":8,"y":3,"height":3,"width":4},"chartProps":{"title":"IEM REG po 3 dnech","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait1week","type":"KpiChart","overviewModule":"READ","overviewId":"","language":"jq","query":"\n          query readout1Dwait1week($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":".diosSet.avgValue as $val | {data: {id: \"1Dwait1week\", value: $val}}","position":{"x":12,"y":3,"height":3,"width":4},"chartProps":{"title":"IEM REG po 1 týdnu","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"IEM_LP15_6_HOURS","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":6,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po 6 hodinách","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_LP15_1_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":9,"y":6,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po 1 dni","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_LP15_3_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":14,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po 3 dnech","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_LP15_1_week","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_15_min_profile_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":9,"y":14,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po týdnu","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_6_HOURS","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":22,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po 6 hodinách","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_1_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":9,"y":22,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po 1 dni","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_3_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":30,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po 3 dnech","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_1_week","type":"BarChart","overviewModule":"READ","overviewId":"","language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"query readPerDayLP151day($time: TimeDelimitation!) {\n                diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_1_day_profile_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n                  splitByTimestampInterval(split: {explicit: {granularity: {fixedInterval: {time: DAY}}, showEmpty: true}}) {\n                    to\n                    set {\n                      avgValue\n                    }\n                  }\n                }\n              }\n              ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.to"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":9,"y":30,"height":8,"width":9},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po týdnu","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','přehled', 'READ overview','READ',ARRAY['READ_VIEW', 'READ_USER','READ_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"readLP10OverviewReport","techDescription":"readout SIEM LP10 overview","title":"odečtenost SIEM LP10","keywords":["kpi chart","readout","count"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"readoutLP10Mwait6hours","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query readoutLP10Mwait6hours($time: TimeDelimitation!) {\n          diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n            count\n            avgNumberValue\n          }\n        }\n      ","transformation":"{data: {id: \"LP10Mwait6hours\", value: .diosSet.avgNumberValue}}","position":{"x":0,"y":0,"height":4,"width":4},"chartProps":{"title":"SIEM LP10 po 6 hodinách","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readoutLP10Mwait1dayCount","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query readoutLP10Mwait1day($time: TimeDelimitation!) {\n          diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n            count\n            avgNumberValue\n          }\n        }\n      ","transformation":"{data: {id: \"LP10Mwait1day\", value: .diosSet.avgNumberValue}}","position":{"x":4,"y":0,"height":4,"width":4},"chartProps":{"title":"SIEM LP10 po 1 dni","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readoutLP10Mwait3days","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query readoutLP10Mwait3days($time: TimeDelimitation!) {\n          diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n            count\n            avgNumberValue\n          }\n        }\n      ","transformation":"{data: {id: \"LP10Mwait3days\", value: .diosSet.avgNumberValue}}","position":{"x":8,"y":0,"height":4,"width":4},"chartProps":{"title":"SIEM LP10 po 3 dnech","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readoutLP10Mwait1weekCount","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query readoutLP10Mwait1week($time: TimeDelimitation!) {\n          diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n            count\n            avgNumberValue\n          }\n        }\n      ","transformation":"{data: {id: \"LP10Mwait1week\", value: .diosSet.avgNumberValue}}","position":{"x":12,"y":0,"height":4,"width":4},"chartProps":{"title":"SIEM LP10 po 1 týdnu","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"SIEM_LP10_6_HOURS","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP10wait6hours($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_6_hours_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgNumberValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgNumberValue"}]}],"position":{"x":0,"y":4,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti SIEM LP10 po 6 hodinách","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"SIEM_LP10_1_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP10wait1day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_1_day_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgNumberValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgNumberValue"}]}],"position":{"x":8,"y":4,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti SIEM LP10 po 1 dni","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"SIEM_LP10_3_DAYS","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP10wait3days($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_3_days_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgNumberValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgNumberValue"}]}],"position":{"x":0,"y":12,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti SIEM LP10 po 3 dnech","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"SIEM_LP10_1_week","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP10wait1week($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_1_week_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgNumberValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgNumberValue"}]}],"position":{"x":8,"y":12,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti SIEM LP10 po týdnu","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"avgLP10","type":"LineChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.groupByDidNew[*]","query":"\n        query readPerDayLP10($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_6_hours_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_1_week_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_3_days_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_10_metering_waiting_1_day_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            groupByDidNew {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      name\n                    }\n                  }\n                }\n              }\n              set {\n                splitByTimestampInterval(\n                  split: {\n                    flexible: {\n                      granularity: { calendarInterval: { time: DAY } }\n                      showEmpty: true\n                      size: 100\n                    }\n                  }\n                ) {\n                  from\n                  set {\n                    avgNumberValue\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"seriesObject","type":"object","values":[{"key":"id","value":"$.key.bucket.localization.name"}]},{"key":"seriesData","type":"array","values":[{"key":"x","value":"$.set.splitByTimestampInterval[*].from"},{"key":"y","value":"$.set.splitByTimestampInterval[*].set.avgNumberValue"}]}],"position":{"x":0,"y":20,"height":10,"width":16},"chartProps":{"colors":["#F8925C","#A56813","#FFD665","#FD845D","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"Průměrná odečtenost SIEM LP10","legendShow":true,"legendSize":50,"enableLegendHiding":true,"enableDataSelection":false,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"grouped","showBorder":true,"enableLineTooltip":true,"enableArea":false,"axisXLabel":"","axisYLabel":"odečtenost (%)","enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','odečtenost SIEM LP10', 'READ history','READ',ARRAY['READ_VIEW', 'READ_USER','READ_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"readLP15OverviewReport","techDescription":"readout LP15 overview","title":"odečtenost IEM LP15","keywords":["kpi chart","readout","count"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"readout15Mwait6hours","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout15Mwait6hours($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"15Mwait6hours\", value: .diosSet.avgValue}}","position":{"x":0,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 6 hodinách","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout15Mwait1dayCount","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout15Mwait1day($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"15Mwait1day\", value: .diosSet.avgValue}}","position":{"x":4,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 1 dni","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout15Mwait3days","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout15Mwait1week($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"15Mwait3days\", value: .diosSet.avgValue}}","position":{"x":8,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 3 dnech","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout15Mwait1weekCount","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout15Mwait1week($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"15Mwait1week\", value: .diosSet.avgValue}}","position":{"x":12,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM LP15 po 1 týdnu","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"IEM_LP15_6_HOURS","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_6_hours_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":3,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po 6 hodinách","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_LP15_1_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_1_day_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":8,"y":3,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po 1 dni","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_LP15_3_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_3_days_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":11,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po 3 dnech","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_LP15_1_week","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_1_week_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":8,"y":11,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM LP15 po týdnu","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"avgLP15","type":"LineChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.groupByDidNew[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_1_day_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_1_week_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_3_days_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_LP_15_metering_waiting_6_hours_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            groupByDidNew {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      name\n                    }\n                  }\n                }\n              }\n              set {\n                splitByTimestampInterval(\n                  split: {\n                    flexible: {\n                      granularity: { calendarInterval: { time: DAY } }\n                      showEmpty: true\n                      size: 100\n                    }\n                  }\n                ) {\n                  from\n                  set {\n                    avgValue\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"seriesObject","type":"object","values":[{"key":"id","value":"$.key.bucket.localization.name"}]},{"key":"seriesData","type":"array","values":[{"key":"x","value":"$.set.splitByTimestampInterval[*].from"},{"key":"y","value":"$.set.splitByTimestampInterval[*].set.avgValue"}]}],"position":{"x":0,"y":19,"height":10,"width":16},"chartProps":{"colors":["#F8925C","#A56813","#FFD665","#FD845D","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"Průměrná odečtenost IEM LP15","legendShow":true,"legendSize":50,"enableLegendHiding":true,"enableDataSelection":false,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"grouped","showBorder":true,"enableLineTooltip":true,"enableArea":false,"axisXLabel":"","axisYLabel":"odečtenost (%)","enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','odečtenost IEM LP15', 'READ history','READ',ARRAY['READ_VIEW', 'READ_USER','READ_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"readREGOverviewReport","techDescription":"readout IEM REG overview","title":"odečtenost IEM REG","keywords":["kpi chart","readout","count"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"readout1Dwait6hours","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout1Dwait6hours($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_6_hours_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"1Dwait6hours\", value: .diosSet.avgValue}}","position":{"x":0,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM REG po 6 hodinách","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait1day","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout1Dwait1day($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_1_day_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"1Dwait1day\", value: .diosSet.avgValue}}","position":{"x":4,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM REG po 1 dni","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait3days","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout1Dwait3days($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_3_days_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"1Dwait3days\", value: .diosSet.avgValue}}","position":{"x":8,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM REG po 3 dnech","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"readout1Dwait1week","type":"KpiChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n          query readout1Dwait1week($time: TimeDelimitation!) {\n            diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_1_week_last_average_1_days\"]}}, time: $time) {\n              count\n              avgValue\n            }\n          }\n        ","transformation":"{data: {id: \"1Dwait1week\", value: .diosSet.avgValue}}","position":{"x":12,"y":0,"height":3,"width":4},"chartProps":{"title":"IEM REG po 1 týdnu","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"IEM_REG_6_HOURS","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_6_hours_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":3,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po 6 hodinách","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_1_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_1_day_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":8,"y":3,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po 1 dni","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_3_DAY","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_3_days_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":0,"y":11,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po 3 dnech","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"IEM_REG_1_week","type":"BarChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.splitByTimestampInterval[*]","query":"\n        query readPerDayLP151day($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_1_week_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"bar","type":"object","values":[{"key":"id","value":"$.from"},{"key":"průměrná odečtenost","value":"$.set.avgValue"}]}],"position":{"x":8,"y":11,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh odečtenosti IEM REG po týdnu","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"odečtenost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"avgIEMreg","type":"LineChart","overviewModule":"READ","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet.groupByDidNew[*]","query":"\n        query readoutPerDayIEM_REG($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_1_day_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_1_week_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_3_days_last_average_1_days\"\n                  \"information:information_technology.network.communication.reading_success_rate.reading_success_rate_REG_1440_metering_waiting_6_hours_last_average_1_days\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            groupByDidNew {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      name\n                    }\n                  }\n                }\n              }\n              set {\n                splitByTimestampInterval(\n                  split: {\n                    flexible: {\n                      granularity: { calendarInterval: { time: DAY } }\n                      showEmpty: true\n                      size: 100\n                    }\n                  }\n                ) {\n                  from\n                  set {\n                    avgValue\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","jsonPathMapping":[{"key":"seriesObject","type":"object","values":[{"key":"id","value":"$.key.bucket.localization.name"}]},{"key":"seriesData","type":"array","values":[{"key":"x","value":"$.set.splitByTimestampInterval[*].from"},{"key":"y","value":"$.set.splitByTimestampInterval[*].set.avgValue"}]}],"position":{"x":0,"y":19,"height":10,"width":16},"chartProps":{"colors":["#F8925C","#A56813","#FFD665","#FD845D","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"Průměrná odečtenost IEM REG","legendShow":true,"legendSize":50,"enableLegendHiding":true,"enableDataSelection":false,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"grouped","showBorder":true,"enableLineTooltip":true,"enableArea":false,"axisXLabel":"","axisYLabel":"odečtenost (%)","enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','odečtenost IEM REG', 'READ readout IEM REG','READ',ARRAY['READ_VIEW', 'READ_USER','READ_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"title":"plány","version":"1.0.0","id":"read.tasks","canvasSettings":{"columns":24,"rows":24},"keywords":["readout","tasks","switch"],"techDescription":"Readout task management","widgets":[{"id":"read.tasks.switch","language":"jq","overviewModule":"READ","overviewId":"","includedFilters":["device"],"type":"TableWidget","position":{"x":0,"y":0,"height":14,"width":14},"query":"\n        query ReadoutTaskPlans {\n          taskPlans(\n            filter: {\n              template: {\n                id: [\n                  \"read_LP_5_siem_data.v1\"\n                  \"read_LP_10_siem_data.v1\"\n                  \"read_LP_15_iem_data.v1\"\n                  \"read_REG_iem_data.v1\"\n                ]\n              }\n            }\n          ) {\n            id\n            template {\n              id\n              localization {\n                name\n              }\n            }\n            active\n            nextTriggerTime\n            filter\n            schedule\n          }\n        }\n      ","transformation":"\n         { data: [ .taskPlans[] |\n          {\n            id: {value: .id},\n            type: {value: .template.localization.name, valueId: .template.id},\n            schedule: {value: .schedule.expression, options: .schedule},\n            nextRun: {value: .nextTriggerTime},\n            state: {value: .active}\n          }\n        ]}\n      ","chartProps":{"rowsInTable":12,"showBorder":true,"showExport":false,"showPagination":true,"showPageSize":false,"enableImport":false,"enableAdhoc":true,"title":"plány odečtových úloh","editable":{"mutation":"EditTaskPlans","refetchQueries":["ReadoutTaskPlans"],"successMessage":"Odečtová úloha byla změněna."}},"config":{"columns":[{"Header":"typ úlohy","accessor":"type"},{"Header":"perioda","accessor":"schedule"},{"Header":"příští běh","accessor":"nextRun"},{"Header":"stav","accessor":"state","editable":{"type":"boolean","trueLabel":"aktivní","falseLabel":"neaktivní","body":"{id: .id, active: .value}"}}]}}]}', 'SYSTEM','plány', 'READ task plans','READ',ARRAY['READ_VIEW', 'READ_USER','READ_ADMIN'], ARRAY['SYSTEM']);

-- MONI reports
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"moniOverviewReport","techDescription":"Monitoring overview","title":"přehled","keywords":["kpi chart","monitoring","overview"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"monitoredDevices","type":"KpiChart","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jsonpath","rootPath":"$.diosSet","query":"\n          query readingSuccess($time: TimeDelimitation) {\n            diosSet(time: $time, filter: {didFilter: {ids: [\n              \"information:information_technology.network.communication.connection_successful_instantaneous\",\n            ]}}) {\n              uniqueCountObject\n            }\n          }\n      ","jsonPathMapping":[{"key":"kpiObject","type":"object","values":[{"key":"id","value":"monitoredDevices"},{"key":"value","value":"$[*].uniqueCountObject"}]}],"position":{"x":0,"y":0,"height":4,"width":4},"chartProps":{"title":"počet monitorovaných zařízení","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"","format":{"digits":-1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalAvgDeviceAvailability","type":"KpiChart","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query totalAvgDeviceAvailability($time: TimeDelimitation) {\n          diosSet(time: $time, filter: {didFilter: {ids: [\n            \"information:information_technology.network.communication.connection_successful_instantaneous\",\n          ]}}) {\n            avgValue\n          }\n        }\n      ","transformation":"{ data: { id: \"totalAvgDeviceAvailability\", value: (if (.diosSet.avgValue != null) then (.diosSet.avgValue * 100) else 0 end) }}","position":{"x":4,"y":0,"height":4,"width":4},"chartProps":{"title":"průměrná dostupnost","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"totalAvgDeviceLatence","type":"KpiChart","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query totalAvgDeviceLatence($time: TimeDelimitation) {\n          diosSet(time: $time, filter: {didFilter: {ids: [\n            \"information:information_technology.network.communication.communication_duration_instantaneous\",\n          ]}}) {\n            avgValue\n          }\n        }\n      ","transformation":"{ data: { id: \"totalAvgDeviceLatence\", value: (if (.diosSet.avgValue != null) then (.diosSet.avgValue * 1000) else 0 end) }}","position":{"x":8,"y":0,"height":4,"width":4},"chartProps":{"title":"průměrná latence","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"ms","format":{"digits":0,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"avgDeviceAvailabilityPerDay","type":"BarChart","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query avgDeviceAvailability($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.connection_successful_instantaneous\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","transformation":"{ data: [ .diosSet.splitByTimestampInterval[] |  { id: .from, \"průměrná dostupnost\": (if (.set.avgValue != null) then (.set.avgValue * 100) else null end)} ]}","position":{"x":0,"y":14,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh průměrné dostupnosti zařízení","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"dostupnost (%)","min":0,"max":100},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"avgDeviceReadingDelayPerDay","type":"BarChart","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query avgDeviceReadingDelay($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.communication_duration_instantaneous\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                avgValue\n              }\n            }\n          }\n        }\n      ","transformation":"{ data: [ .diosSet.splitByTimestampInterval[] |  { id: .from, \"průměrná odezva\": (if (.set.avgValue != null) then (.set.avgValue * 1000) else null end)} ]}","position":{"x":8,"y":14,"height":8,"width":8},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"průběh průměrné latence zařízení","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"latence (ms)"},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"devicesAvailabilityByDay","type":"MultiSeriesHeatMap","overviewModule":"MONI","overviewId":"","position":{"x":0,"y":4,"height":10,"width":16},"language":"jq","query":"\n        query devicesAvailabilityByDay($time: TimeDelimitation!) {\n          diosSet(\n            filter: {\n              didFilter: {\n                ids: [\n                  \"information:information_technology.network.communication.connection_successful_instantaneous\"\n                ]\n              }\n            }\n            time: $time\n          ) {\n            groupByObject {\n              key {\n                ... on SingleInstanceKey {\n                  bucket {\n                    ... on Device {\n                      id {\n                        value\n                      }\n                    }\n                  }\n                }\n              }\n              set {\n                splitByTimestampInterval(\n                  split: {\n                    flexible: {\n                      granularity: { calendarInterval: { time: DAY } }\n                      showEmpty: true\n                      size: 100\n                    }\n                  }\n                ) {\n                  from\n                  set {\n                    avgValue\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        {data: [\n          .diosSet.groupByObject[]\n          | .key.bucket.id.value as $id\n          | {\n            id: $id,\n            label: $id,\n            data: [.set.splitByTimestampInterval[] | {timestamp: .from, value: .set.avgValue}]\n          }\n        ]}\n      ","chartProps":{"title":"dostupnost podle zařízení","xAxisLabel":"ckód","colors":["#FD845D","#FEAE5D","#FFD665","#FFE972","#FFF2AD"],"legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":true,"enableTooltip":true,"showBorder":true,"widgetStyle":""},"includedFilters":["time"]}]}', 'SYSTEM','přehled', 'MONI overview','MONI',ARRAY['MONI_VIEW', 'MONI_USER','MONI_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"moniAccessibilityLatencyReport","techDescription":"Monitoring accessibility and latency","title":"dostupnost","keywords":["kpi chart","monitoring","accessibility","latency"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"accessibilityTable","type":"TableWidget","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query moniAccessibilityTable($time: TimeDelimitation) {\n          diosSet(filter: {didFilter: {ids: [\"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}, time: $time) {\n            groupByObject {\n              key {\n                ... on SingleInstanceKey {\n                  bucket {\n                    ... on Device {\n                      id {\n                        did {\n                          id\n                        }\n                        value\n                      }\n                      internalId\n                      attributes(dids: [\"information:attribute.ckod\", \"information:attribute.device_maintenance_status\"]) {\n                        did {\n                          id\n                        }\n                        normalizedValue\n                      }\n                      kind {\n                        id\n                        attributes(dids: [\"information:attribute.matnr\", \"information:attribute.vyrobce\"]) {\n                          did {\n                            id\n                          }\n                          value\n                        }\n                      }\n                      relPlace(edge: {type: \"installed_at\", direction: OUT}, filter: {node: {OR: [{kindName: \"place:place.secondary_substation\"}, {kindName: \"place:place.device_location\"}]}}) {\n                        internalId\n                        id {\n                          did {\n                            id\n                          }\n                          value\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n              set {\n                groupByDid {\n                  key {\n                    ... on SingleDidKey {\n                      bucket {\n                        id\n                      }\n                    }\n                  }\n                  set {\n                    avgNumberValue\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        def attribute(attr): ((.attributes[] | select(.did.id == attr)) // null);\n        def diosDid(did): ((.groupByDid[] | select(.key.bucket.id == did)) // null);\n\n        {data:[ .diosSet.groupByObject[] | {\n          id: {keyId: \"internalId\", intId: .key.bucket.internalId, valueId: .key.bucket.internalId, value: .key.bucket.internalId},\n          \"ckod\": ((.key.bucket | attribute(\"information:attribute.ckod\").normalizedValue) as $val | {keyId: \"information:attribute.ckod\", intId: .key.bucket.internalId, valueId: $val, value: $val}),\n          \"maintenance_status\": ((.key.bucket | attribute(\"information:attribute.device_maintenance_status\").normalizedValue) as $val | {keyId: \"information:attribute.device_maintenance_status\", intId: .authorDevice.internalId, valueId: $val, value: $val}),\n          \"matnr\": ((.key.bucket.kind | attribute(\"information:attribute.matnr\").value) as $val | {keyId: \"information:attribute.matnr\", intId: .key.bucket.internalId, valueId: $val, value: $val}),\n          \"vyrobce\": ((.key.bucket.kind | attribute(\"information:attribute.vyrobce\").value) as $val | {keyId: \"information:attribute.vyrobce\", intId: .key.bucket.internalId, valueId: $val, value: $val}),\n          dts_om: (.key.bucket.relPlace[0] as $dtsOm | {keyId: $dtsOm.id.did.id, intId: $dtsOm.internalId, valueId: $dtsOm.id.value, value: $dtsOm.id.value}),\n           accessibility: ((.set | diosDid(\"information:information_technology.network.communication.connection_successful_instantaneous\") as $accessibility | {keyId: $accessibility.key.bucket.id, intId: $accessibility.key.bucket.id, valueId: $accessibility.set.avgNumberValue, value: (if ($accessibility.set.avgNumberValue != null) then (($accessibility.set.avgNumberValue * 100) // 0 | tostring ) else null end) })),\n           reading_delay: ((.set | diosDid(\"information:information_technology.network.communication.communication_duration_instantaneous\") as $delay | {keyId: $delay.key.bucket.id, intId: $delay.key.bucket.id, valueId: $delay.set.avgNumberValue, value: (if ($delay.set.avgNumberValue != null) then (($delay.set.avgNumberValue * 1000) // 0 | tostring) else null end) })),\n        } ]}\n      ","config":{"columns":[{"Header":"DTS/OM","accessor":"dts_om"},{"Header":"zařízení","accessor":"ckod","width":140},{"Header":"výrobce","accessor":"vyrobce"},{"Header":"material","accessor":"matnr"},{"Header":"průměrná dostupnost (%)","accessor":"accessibility"},{"Header":"průměrná latence (ms)","accessor":"reading_delay"},{"Header":"servisní stav","accessor":"maintenance_status"}]},"position":{"x":0,"y":0,"height":12,"width":16},"chartProps":{"title":"dostupnost","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"enableAdhoc":false,"rowsInTable":7}}]}', 'SYSTEM','dostupnost', 'MONI overview','MONI',ARRAY['MONI_VIEW', 'MONI_USER','MONI_ADMIN'], ARRAY['SYSTEM']);
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"title":"plány","version":"1.0.0","id":"moni.tasks","canvasSettings":{"columns":24,"rows":24},"keywords":["monitoring","tasks","switch"],"techDescription":"Monitoring task management","widgets":[{"id":"moni.tasks.switch","language":"jq","overviewModule":"MONI","overviewId":"","includedFilters":["device"],"type":"TableWidget","position":{"x":0,"y":0,"height":10,"width":10},"query":"\n        query MoniTaskPlans {\n          taskPlans(\n            filter: {\n              template: {\n                id: [\"measure_communication_availability_and_delay.v1\"]\n              }\n            }\n          ) {\n            id\n            template {\n              id\n              localization {\n                name\n              }\n            }\n            active\n            nextTriggerTime\n            filter\n            schedule\n          }\n        }\n      ","transformation":"\n         { data: [ .taskPlans[] |\n          {\n            id: {value: .id},\n            type: {value: .template.localization.name, valueId: .template.id},\n            schedule: {value: .schedule.expression, options: .schedule},\n            nextRun: {value: .nextTriggerTime},\n            state: {value: .active}\n          }\n        ]}\n      ","chartProps":{"rowsInTable":7,"showBorder":true,"showExport":false,"showPagination":true,"showPageSize":false,"enableImport":false,"enableAdhoc":true,"title":"plány monitorovacích úloh","editable":{"mutation":"EditTaskPlans","refetchQueries":["MoniTaskPlans"],"successMessage":"Úloha byla změněna."}},"config":{"columns":[{"Header":"typ úlohy","accessor":"type"},{"Header":"perioda","accessor":"schedule"},{"Header":"příští běh","accessor":"nextRun"},{"Header":"stav","accessor":"state","editable":{"type":"boolean","trueLabel":"aktivní","falseLabel":"neaktivní","body":"{id: .id, active: .value}"}}]}}]}', 'SYSTEM','plány', 'MONI task plans','MONI',ARRAY['MONI_VIEW', 'MONI_USER','MONI_ADMIN'], ARRAY['SYSTEM']);

-- MEAS reports
insert into reports (report_config, author, name, description, module, visibility, users) values ('{"id":"measTechnicalValidationReport","techDescription":"Measurements technical validation","title":"technická validace","keywords":["kpi chart","measurements","technical validation"],"canvasSettings":{"rows":24,"columns":24},"version":"1.0.0","widgets":[{"id":"validMeasurements","type":"KpiChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query validMeasurements($time:TimeDelimitation) {\n          diosSet(time: $time, filter: {AND: [{validityFilter: {includeValid: ALL, includeDuplicated: ALL}, tagFilter: {key: {equals: \"readout\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            count\n            groupByValidity {\n              key\n              set {\n                count\n                groupByDuplicity {\n                  key\n                  set {\n                    count\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"{data: {id: \"validMeasurements\", value: ((.diosSet | ((.groupByValidity[] | select(.key == true) | .set.groupByDuplicity[] | select(.key == false).set.count) / .count ) * 100 ) // null )}}","position":{"x":0,"y":0,"height":4,"width":4},"chartProps":{"title":"validní měření","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"invalidMeasurements","type":"KpiChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query invalidMeasurements($time:TimeDelimitation) {\n          diosSet(time: $time, filter: {AND: [{validityFilter: {includeValid: ALL, includeDuplicated: ALL}, tagFilter: {key: {equals: \"readout\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            count\n            groupByValidity {\n              key\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{data: {id: \"invalidMeasurements\", value: ((.diosSet | ((.groupByValidity[] | select(.key == false).set.count) / .count ) * 100 ) // null)}}","position":{"x":4,"y":0,"height":4,"width":4},"chartProps":{"title":"nevalidní měření","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"duplicityMeasurements","type":"KpiChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query duplicityMeasurements($time:TimeDelimitation) {\n          diosSet(time: $time, filter: {AND: [{validityFilter: {includeValid: ALL, includeDuplicated: ALL}, tagFilter: {key: {equals: \"readout\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            count\n            groupByDuplicity {\n              key\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{data: {id: \"duplicityMeasurements\", value: ((.diosSet | ((.groupByDuplicity[] | select(.key == true).set.count) / .count ) * 100 ) // null)}}","position":{"x":8,"y":0,"height":4,"width":4},"chartProps":{"title":"duplicitní měření","widgetStyle":"number","showBorder":true,"prefix":"","suffix":"%","format":{"digits":1,"timeZone":"UTC","timeFormat":"yyyy-MM-dd HH:mm:ss.ms","durationFormat":"short"}}},{"id":"invalidMeasurementsPerDay","type":"BarChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query invalidMeasurementsPerDay($time: TimeDelimitation) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                {\n                  validityFilter: {\n                    includeValid: INVALID\n                    includeDuplicated: ALL\n                  }\n                  tagFilter: { key: { equals: \"readout\" } }\n                }\n                {\n                  NOT: {\n                    didFilter: {\n                      ids: [\n                        \"information:system.cc.cxiem.latest_data_collected\"\n                        \"information:information_technology.network.communication.connection_successful_instantaneous\"\n                        \"information:information_technology.network.communication.communication_duration_instantaneous\"\n                      ]\n                    }\n                  }\n                }\n              ]\n            }\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{ data: [ .diosSet.splitByTimestampInterval[] |  { id: .from, \"nevalidní\": (.set.count // null)} ]}","position":{"x":0,"y":4,"height":8,"width":12},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet nevalidních měření","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"počet"},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"duplicityMeasurementsPerDay","type":"BarChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query duplicityMeasurementsPerDay($time: TimeDelimitation) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                {\n                  validityFilter: {\n                    includeValid: ALL\n                    includeDuplicated: DUPLICATE\n                  }\n                  tagFilter: { key: { equals: \"readout\" } }\n                }\n                {\n                  NOT: {\n                    didFilter: {\n                      ids: [\n                        \"information:system.cc.cxiem.latest_data_collected\"\n                        \"information:information_technology.network.communication.connection_successful_instantaneous\"\n                        \"information:information_technology.network.communication.communication_duration_instantaneous\"\n                      ]\n                    }\n                  }\n                }\n              ]\n            }\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{ data: [ .diosSet.splitByTimestampInterval[] |  { id: .from, \"duplicitní\": (.set.count // null)} ]}","position":{"x":12,"y":4,"height":8,"width":12},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"počet duplicitních měření","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"počet"},"enableXZoom":true,"layoutDirection":"vertical"}},{"id":"invalidMeasurementsDevicesTable","type":"TableWidget","overviewModule":"MONI","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query invalidMeasurementsDevicesTable($time: TimeDelimitation) {\n          diosSet(time: $time, filter: {AND: [{validityFilter: {includeValid: INVALID, includeDuplicated: ALL}, tagFilter: {key: {equals: \"readout\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            groupByAuthor(size: 10000, ordering: DESCENDING) {\n              key {\n                __typename\n                ... on SingleInstanceKey {\n                  bucket {\n                    ... on Device {\n                      internalId\n                      id {\n                        did {\n                          id\n                        }\n                        value\n                      }\n                      relDevice(edge: {type: \"accessible_by\", direction: OUT}) {\n                        relPlace(edge: {type: \"installed_at\", direction: OUT}) {\n                          relPlace(edge: {type: \"feed_from\", direction: OUT}) {\n                            internalId\n                            id {\n                              did {\n                                id\n                              }\n                              value\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n              set {\n                groupByDuplicity {\n                  key\n                  set {\n                    count\n                  }\n                }\n                groupByValidity {\n                  key\n                  set {\n                    count\n                  }\n                }\n              }\n            }\n          }\n        }\n      ","transformation":"\n        {data:[ .diosSet.groupByAuthor[] | {\n          id: {keyId: \"internalId\", intId: .key.bucket.internalId, valueId: .key.bucket.internalId, value: .key.bucket.internalId},\n          ckod: (.key.bucket.id.value as $val | {keyId: .key.bucket.id.did.id, intId: .key.bucket.internalId, valueId: $val, value: $val}),\n          dts: (.key.bucket.relDevice[0].relPlace[0].relPlace[0] as $dts | {keyId: $dts.id.did.id, intId: $dts.internalId, valueId: $dts.id.value, value: $dts.id.value}),\n          invalid: (.set.groupByValidity[0] as $validity | {keyId: $validity.key, intId: $validity.key, valueId: $validity.set.count, value: $validity.set.count }),\n        } ]}\n      ","config":{"columns":[{"Header":"zařízení","accessor":"ckod","width":140},{"Header":"DTS mediátor","accessor":"dts"},{"Header":"nevalidní měření","accessor":"invalid"}]},"position":{"x":0,"y":12,"height":10,"width":16},"chartProps":{"title":"zařízení zasílající nejvíce nevalidních dat","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"rowsInTable":7}},{"id":"invalidMeasurementByTag","type":"PieChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query invalidMeasurementByTag($time: TimeDelimitation) {\n          LP_10_metering: diosSet(time: $time, filter: {AND: [{validityFilter: {includeDuplicated: ALL, includeValid: INVALID}, tagFilter: {key: {equals: \"readout\"}, value: {startsWith: \"LP_10\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            count\n          }\n          LP_15_metering: diosSet(time: $time, filter: {AND: [{validityFilter: {includeDuplicated: ALL, includeValid: INVALID}, tagFilter: {key: {equals: \"readout\"}, value: {startsWith: \"LP_15\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            count\n          }\n          REG_1440_metering: diosSet(time: $time, filter: {AND: [{validityFilter: {includeDuplicated: ALL, includeValid: INVALID}, tagFilter: {key: {equals: \"readout\"}, value: {startsWith: \"REG_1440\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            count\n          }\n        }\n      ","transformation":"\n        def tag(key): {id: key, name: key, value: .[key].count};\n        keys as $k | {data: [ tag($k[0]) , tag($k[1]), tag($k[2])]}\n      ","position":{"x":0,"y":22,"height":10,"width":10},"chartProps":{"colors":["#FFD665","#FEAE5D","#FD845D","#FFF2AD","#FFE972","#F8925C","#D9A051","#AC772D","#A56813"],"title":"nevalidní měření podle druhu","legendShow":true,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"pie","showBorder":true,"enableRadialLabels":true}},{"id":"invalidMeasurementByDID","type":"TableWidget","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query invalidMeasurementByDID($time: TimeDelimitation) {\n          diosSet(time: $time, filter: {AND: [{validityFilter: {includeValid: INVALID, includeDuplicated: ALL}, tagFilter: {key: {equals: \"readout\"}}}, {NOT: {didFilter: {ids: [\"information:system.cc.cxiem.latest_data_collected\", \"information:information_technology.network.communication.connection_successful_instantaneous\", \"information:information_technology.network.communication.communication_duration_instantaneous\"]}}}]}) {\n            groupByDidNew {\n              key {\n                ... on SingleDidKey {\n                  bucket {\n                    id\n                    localization {\n                      name\n                    }\n                  }\n                }\n              }\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"\n        {data: [ .diosSet.groupByDidNew[] | {\n          id: {value: .key.bucket.id},\n          did: {value: .key.bucket.localization.name},\n          count: {value: .set.count}\n        }] | sort_by(-.count.value) }\n      ","position":{"x":10,"y":22,"height":10,"width":10},"config":{"columns":[{"Header":"veličina","accessor":"did"},{"Header":"počet měření","accessor":"count","width":100}]},"chartProps":{"title":"nevalidní měření podle veličin","showBorder":true,"showExport":true,"showPageSize":true,"showPagination":true,"enableImport":false,"rowsInTable":5}},{"id":"measurementsPerDay","type":"BarChart","overviewModule":"MEAS","overviewId":"","includedFilters":["time"],"language":"jq","query":"\n        query measurementsPerDay($time: TimeDelimitation) {\n          diosSet(\n            time: $time\n            filter: {\n              AND: [\n                {\n                  validityFilter: { includeValid: ALL, includeDuplicated: ALL }\n                  tagFilter: { key: { equals: \"readout\" } }\n                }\n                {\n                  NOT: {\n                    didFilter: {\n                      ids: [\n                        \"information:system.cc.cxiem.latest_data_collected\"\n                        \"information:information_technology.network.communication.connection_successful_instantaneous\"\n                        \"information:information_technology.network.communication.communication_duration_instantaneous\"\n                      ]\n                    }\n                  }\n                }\n              ]\n            }\n          ) {\n            splitByTimestampInterval(\n              split: {\n                flexible: {\n                  granularity: { calendarInterval: { time: DAY } }\n                  showEmpty: true\n                  size: 100\n                }\n              }\n            ) {\n              from\n              set {\n                count\n              }\n            }\n          }\n        }\n      ","transformation":"{ data: [ .diosSet.splitByTimestampInterval[] |  { id: .from, \"měření\": (.set.count // null)} ]}","position":{"x":0,"y":32,"height":8,"width":12},"chartProps":{"colors":["#FD845D","#A56813","#FFD665","#F8925C","#FEAE5D","#AC772D","#FFE972","#D9A051","#FFF2AD"],"title":"celkové množství měření","legendShow":false,"enableLegendHiding":true,"enableDataSelection":true,"enableDataLabels":false,"enableTooltip":true,"widgetStyle":"","showBorder":true,"xAxis":{"label":""},"yAxis":{"label":"počet"},"enableXZoom":true,"layoutDirection":"vertical"}}]}', 'SYSTEM','technická validace', 'MEAS overview','MEAS',ARRAY['MEAS_VIEW', 'MONI_USER','MONI_ADMIN'], ARRAY['SYSTEM']);
